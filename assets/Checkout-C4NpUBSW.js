import{c as dt,r,j as c,a as F,x as tr,$ as nr,y as Ft,z as rr,A as Mt,B as De,P as pe,C as q,D as Oe,E as Lt,F as Wt,G as or,H as Ut,X as ar,I as Bt,J as Vt,K as sr,M as cr,N as ir,R as lr,q as yt,v as Kt,o as ye,m as dr}from"./index-VvENCeXe.js";import{B as Re,c as ur,a as Se,P as fr,H as pr,N as mr}from"./NewsletterAndFooter-CEqVmu0V.js";import{L as Ct,o as vr,s as re,e as Et,u as hr,t as gr,F as xr,a as oe,b as ae,c as Q,d as se,I as $e,f as ce}from"./input-COUR16M8.js";import{S as Qe,a as Je,b as et,c as tt,d as Ne}from"./select-CMMcZB2_.js";import{N as U,c as br}from"./checkoutUtils-B8bml97r.js";import{c as yr,_ as Cr,u as Er,a as xe,f as $r,z as wr,s as Nr,b as Rr,R as Sr,e as Pr,h as ut,d as Ht,g as qt,F as zt,C as jr}from"./Combination-BDTKkzfK.js";import{u as Dr}from"./index-ePJpB9Uz.js";import{L as Or}from"./loader-circle-CCt253HO.js";import"./chevron-down-C3FES299.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ar=dt("ChevronsUpDown",[["path",{d:"m7 15 5 5 5-5",key:"1hf1tw"}],["path",{d:"m7 9 5-5 5 5",key:"sgt6xg"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kr=dt("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ir=dt("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/*! js-cookie v3.0.5 | MIT */function Te(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var o in t)e[o]=t[o]}return e}var _r={read:function(e){return e[0]==='"'&&(e=e.slice(1,-1)),e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(e){return encodeURIComponent(e).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}};function nt(e,n){function t(a,s,l){if(!(typeof document>"u")){l=Te({},n,l),typeof l.expires=="number"&&(l.expires=new Date(Date.now()+l.expires*864e5)),l.expires&&(l.expires=l.expires.toUTCString()),a=encodeURIComponent(a).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var i="";for(var d in l)l[d]&&(i+="; "+d,l[d]!==!0&&(i+="="+l[d].split(";")[0]));return document.cookie=a+"="+e.write(s,a)+i}}function o(a){if(!(typeof document>"u"||arguments.length&&!a)){for(var s=document.cookie?document.cookie.split("; "):[],l={},i=0;i<s.length;i++){var d=s[i].split("="),u=d.slice(1).join("=");try{var f=decodeURIComponent(d[0]);if(l[f]=e.read(u,f),a===f)break}catch{}}return a?l[a]:l}}return Object.create({set:t,get:o,remove:function(a,s){t(a,"",Te({},s,{expires:-1}))},withAttributes:function(a){return nt(this.converter,Te({},this.attributes,a))},withConverter:function(a){return nt(Te({},this.converter,a),this.attributes)}},{attributes:{value:Object.freeze(n)},converter:{value:Object.freeze(e)}})}var Tr=nt(_r,{path:"/"});const Fr=tr("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),Xt=r.forwardRef(({className:e,variant:n,...t},o)=>c.jsx("div",{ref:o,role:"alert",className:F(Fr({variant:n}),e),...t}));Xt.displayName="Alert";const Mr=r.forwardRef(({className:e,...n},t)=>c.jsx("h5",{ref:t,className:F("mb-1 font-medium leading-none tracking-tight",e),...n}));Mr.displayName="AlertTitle";const Gt=r.forwardRef(({className:e,...n},t)=>c.jsx("div",{ref:t,className:F("text-sm [&_p]:leading-relaxed",e),...n}));Gt.displayName="AlertDescription";var $t=1,Lr=.9,Wr=.8,Ur=.17,Ke=.1,He=.999,Br=.9999,Vr=.99,Kr=/[\\\/_+.#"@\[\(\{&]/,Hr=/[\\\/_+.#"@\[\(\{&]/g,qr=/[\s-]/,Yt=/[\s-]/g;function rt(e,n,t,o,a,s,l){if(s===n.length)return a===e.length?$t:Vr;var i=`${a},${s}`;if(l[i]!==void 0)return l[i];for(var d=o.charAt(s),u=t.indexOf(d,a),f=0,h,C,g,S;u>=0;)h=rt(e,n,t,o,u+1,s+1,l),h>f&&(u===a?h*=$t:Kr.test(e.charAt(u-1))?(h*=Wr,g=e.slice(a,u-1).match(Hr),g&&a>0&&(h*=Math.pow(He,g.length))):qr.test(e.charAt(u-1))?(h*=Lr,S=e.slice(a,u-1).match(Yt),S&&a>0&&(h*=Math.pow(He,S.length))):(h*=Ur,a>0&&(h*=Math.pow(He,u-a))),e.charAt(u)!==n.charAt(s)&&(h*=Br)),(h<Ke&&t.charAt(u-1)===o.charAt(s+1)||o.charAt(s+1)===o.charAt(s)&&t.charAt(u-1)!==o.charAt(s))&&(C=rt(e,n,t,o,u+1,s+2,l),C*Ke>h&&(h=C*Ke)),h>f&&(f=h),u=t.indexOf(d,u+1);return l[i]=f,f}function wt(e){return e.toLowerCase().replace(Yt," ")}function zr(e,n,t){return e=t&&t.length>0?`${e+" "+t.join(" ")}`:e,rt(e,n,wt(e),wt(n),0,0,{})}function T(){return T=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var o in t)({}).hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},T.apply(null,arguments)}function Ce(e,n,{checkForDefaultPrevented:t=!0}={}){return function(a){if(e==null||e(a),t===!1||!a.defaultPrevented)return n==null?void 0:n(a)}}function Xr(e,n){typeof e=="function"?e(n):e!=null&&(e.current=n)}function Zt(...e){return n=>e.forEach(t=>Xr(t,n))}function Ae(...e){return r.useCallback(Zt(...e),e)}function Gr(e,n=[]){let t=[];function o(s,l){const i=r.createContext(l),d=t.length;t=[...t,l];function u(h){const{scope:C,children:g,...S}=h,v=(C==null?void 0:C[e][d])||i,x=r.useMemo(()=>S,Object.values(S));return r.createElement(v.Provider,{value:x},g)}function f(h,C){const g=(C==null?void 0:C[e][d])||i,S=r.useContext(g);if(S)return S;if(l!==void 0)return l;throw new Error(`\`${h}\` must be used within \`${s}\``)}return u.displayName=s+"Provider",[u,f]}const a=()=>{const s=t.map(l=>r.createContext(l));return function(i){const d=(i==null?void 0:i[e])||s;return r.useMemo(()=>({[`__scope${e}`]:{...i,[e]:d}}),[i,d])}};return a.scopeName=e,[o,Yr(a,...n)]}function Yr(...e){const n=e[0];if(e.length===1)return n;const t=()=>{const o=e.map(a=>({useScope:a(),scopeName:a.scopeName}));return function(s){const l=o.reduce((i,{useScope:d,scopeName:u})=>{const h=d(s)[`__scope${u}`];return{...i,...h}},{});return r.useMemo(()=>({[`__scope${n.scopeName}`]:l}),[l])}};return t.scopeName=n.scopeName,t}const ot=globalThis!=null&&globalThis.document?r.useLayoutEffect:()=>{},Zr=nr.useId||(()=>{});let Qr=0;function qe(e){const[n,t]=r.useState(Zr());return ot(()=>{e||t(o=>o??String(Qr++))},[e]),e||(n?`radix-${n}`:"")}function le(e){const n=r.useRef(e);return r.useEffect(()=>{n.current=e}),r.useMemo(()=>(...t)=>{var o;return(o=n.current)===null||o===void 0?void 0:o.call(n,...t)},[])}function Jr({prop:e,defaultProp:n,onChange:t=()=>{}}){const[o,a]=eo({defaultProp:n,onChange:t}),s=e!==void 0,l=s?e:o,i=le(t),d=r.useCallback(u=>{if(s){const h=typeof u=="function"?u(e):u;h!==e&&i(h)}else a(u)},[s,e,a,i]);return[l,d]}function eo({defaultProp:e,onChange:n}){const t=r.useState(e),[o]=t,a=r.useRef(o),s=le(n);return r.useEffect(()=>{a.current!==o&&(s(o),a.current=o)},[o,a,s]),t}const ft=r.forwardRef((e,n)=>{const{children:t,...o}=e,a=r.Children.toArray(t),s=a.find(no);if(s){const l=s.props.children,i=a.map(d=>d===s?r.Children.count(l)>1?r.Children.only(null):r.isValidElement(l)?l.props.children:null:d);return r.createElement(at,T({},o,{ref:n}),r.isValidElement(l)?r.cloneElement(l,void 0,i):null)}return r.createElement(at,T({},o,{ref:n}),t)});ft.displayName="Slot";const at=r.forwardRef((e,n)=>{const{children:t,...o}=e;return r.isValidElement(t)?r.cloneElement(t,{...ro(o,t.props),ref:n?Zt(n,t.ref):t.ref}):r.Children.count(t)>1?r.Children.only(null):null});at.displayName="SlotClone";const to=({children:e})=>r.createElement(r.Fragment,null,e);function no(e){return r.isValidElement(e)&&e.type===to}function ro(e,n){const t={...n};for(const o in n){const a=e[o],s=n[o];/^on[A-Z]/.test(o)?a&&s?t[o]=(...i)=>{s(...i),a(...i)}:a&&(t[o]=a):o==="style"?t[o]={...a,...s}:o==="className"&&(t[o]=[a,s].filter(Boolean).join(" "))}return{...e,...t}}const oo=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],K=oo.reduce((e,n)=>{const t=r.forwardRef((o,a)=>{const{asChild:s,...l}=o,i=s?ft:n;return r.useEffect(()=>{window[Symbol.for("radix-ui")]=!0},[]),r.createElement(i,T({},l,{ref:a}))});return t.displayName=`Primitive.${n}`,{...e,[n]:t}},{});function ao(e,n){e&&Ft.flushSync(()=>e.dispatchEvent(n))}function so(e,n=globalThis==null?void 0:globalThis.document){const t=le(e);r.useEffect(()=>{const o=a=>{a.key==="Escape"&&t(a)};return n.addEventListener("keydown",o),()=>n.removeEventListener("keydown",o)},[t,n])}const st="dismissableLayer.update",co="dismissableLayer.pointerDownOutside",io="dismissableLayer.focusOutside";let Nt;const lo=r.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),uo=r.forwardRef((e,n)=>{var t;const{disableOutsidePointerEvents:o=!1,onEscapeKeyDown:a,onPointerDownOutside:s,onFocusOutside:l,onInteractOutside:i,onDismiss:d,...u}=e,f=r.useContext(lo),[h,C]=r.useState(null),g=(t=h==null?void 0:h.ownerDocument)!==null&&t!==void 0?t:globalThis==null?void 0:globalThis.document,[,S]=r.useState({}),v=Ae(n,j=>C(j)),x=Array.from(f.layers),[p]=[...f.layersWithOutsidePointerEventsDisabled].slice(-1),E=x.indexOf(p),N=h?x.indexOf(h):-1,$=f.layersWithOutsidePointerEventsDisabled.size>0,P=N>=E,D=fo(j=>{const _=j.target,M=[...f.branches].some(B=>B.contains(_));!P||M||(s==null||s(j),i==null||i(j),j.defaultPrevented||d==null||d())},g),O=po(j=>{const _=j.target;[...f.branches].some(B=>B.contains(_))||(l==null||l(j),i==null||i(j),j.defaultPrevented||d==null||d())},g);return so(j=>{N===f.layers.size-1&&(a==null||a(j),!j.defaultPrevented&&d&&(j.preventDefault(),d()))},g),r.useEffect(()=>{if(h)return o&&(f.layersWithOutsidePointerEventsDisabled.size===0&&(Nt=g.body.style.pointerEvents,g.body.style.pointerEvents="none"),f.layersWithOutsidePointerEventsDisabled.add(h)),f.layers.add(h),Rt(),()=>{o&&f.layersWithOutsidePointerEventsDisabled.size===1&&(g.body.style.pointerEvents=Nt)}},[h,g,o,f]),r.useEffect(()=>()=>{h&&(f.layers.delete(h),f.layersWithOutsidePointerEventsDisabled.delete(h),Rt())},[h,f]),r.useEffect(()=>{const j=()=>S({});return document.addEventListener(st,j),()=>document.removeEventListener(st,j)},[]),r.createElement(K.div,T({},u,{ref:v,style:{pointerEvents:$?P?"auto":"none":void 0,...e.style},onFocusCapture:Ce(e.onFocusCapture,O.onFocusCapture),onBlurCapture:Ce(e.onBlurCapture,O.onBlurCapture),onPointerDownCapture:Ce(e.onPointerDownCapture,D.onPointerDownCapture)}))});function fo(e,n=globalThis==null?void 0:globalThis.document){const t=le(e),o=r.useRef(!1),a=r.useRef(()=>{});return r.useEffect(()=>{const s=i=>{if(i.target&&!o.current){let u=function(){Qt(co,t,d,{discrete:!0})};const d={originalEvent:i};i.pointerType==="touch"?(n.removeEventListener("click",a.current),a.current=u,n.addEventListener("click",a.current,{once:!0})):u()}else n.removeEventListener("click",a.current);o.current=!1},l=window.setTimeout(()=>{n.addEventListener("pointerdown",s)},0);return()=>{window.clearTimeout(l),n.removeEventListener("pointerdown",s),n.removeEventListener("click",a.current)}},[n,t]),{onPointerDownCapture:()=>o.current=!0}}function po(e,n=globalThis==null?void 0:globalThis.document){const t=le(e),o=r.useRef(!1);return r.useEffect(()=>{const a=s=>{s.target&&!o.current&&Qt(io,t,{originalEvent:s},{discrete:!1})};return n.addEventListener("focusin",a),()=>n.removeEventListener("focusin",a)},[n,t]),{onFocusCapture:()=>o.current=!0,onBlurCapture:()=>o.current=!1}}function Rt(){const e=new CustomEvent(st);document.dispatchEvent(e)}function Qt(e,n,t,{discrete:o}){const a=t.originalEvent.target,s=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:t});n&&a.addEventListener(e,n,{once:!0}),o?ao(a,s):a.dispatchEvent(s)}const ze="focusScope.autoFocusOnMount",Xe="focusScope.autoFocusOnUnmount",St={bubbles:!1,cancelable:!0},mo=r.forwardRef((e,n)=>{const{loop:t=!1,trapped:o=!1,onMountAutoFocus:a,onUnmountAutoFocus:s,...l}=e,[i,d]=r.useState(null),u=le(a),f=le(s),h=r.useRef(null),C=Ae(n,v=>d(v)),g=r.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;r.useEffect(()=>{if(o){let v=function(N){if(g.paused||!i)return;const $=N.target;i.contains($)?h.current=$:J(h.current,{select:!0})},x=function(N){if(g.paused||!i)return;const $=N.relatedTarget;$!==null&&(i.contains($)||J(h.current,{select:!0}))},p=function(N){if(document.activeElement===document.body)for(const P of N)P.removedNodes.length>0&&J(i)};document.addEventListener("focusin",v),document.addEventListener("focusout",x);const E=new MutationObserver(p);return i&&E.observe(i,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",v),document.removeEventListener("focusout",x),E.disconnect()}}},[o,i,g.paused]),r.useEffect(()=>{if(i){jt.add(g);const v=document.activeElement;if(!i.contains(v)){const p=new CustomEvent(ze,St);i.addEventListener(ze,u),i.dispatchEvent(p),p.defaultPrevented||(vo(yo(Jt(i)),{select:!0}),document.activeElement===v&&J(i))}return()=>{i.removeEventListener(ze,u),setTimeout(()=>{const p=new CustomEvent(Xe,St);i.addEventListener(Xe,f),i.dispatchEvent(p),p.defaultPrevented||J(v??document.body,{select:!0}),i.removeEventListener(Xe,f),jt.remove(g)},0)}}},[i,u,f,g]);const S=r.useCallback(v=>{if(!t&&!o||g.paused)return;const x=v.key==="Tab"&&!v.altKey&&!v.ctrlKey&&!v.metaKey,p=document.activeElement;if(x&&p){const E=v.currentTarget,[N,$]=ho(E);N&&$?!v.shiftKey&&p===$?(v.preventDefault(),t&&J(N,{select:!0})):v.shiftKey&&p===N&&(v.preventDefault(),t&&J($,{select:!0})):p===E&&v.preventDefault()}},[t,o,g.paused]);return r.createElement(K.div,T({tabIndex:-1},l,{ref:C,onKeyDown:S}))});function vo(e,{select:n=!1}={}){const t=document.activeElement;for(const o of e)if(J(o,{select:n}),document.activeElement!==t)return}function ho(e){const n=Jt(e),t=Pt(n,e),o=Pt(n.reverse(),e);return[t,o]}function Jt(e){const n=[],t=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:o=>{const a=o.tagName==="INPUT"&&o.type==="hidden";return o.disabled||o.hidden||a?NodeFilter.FILTER_SKIP:o.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;t.nextNode();)n.push(t.currentNode);return n}function Pt(e,n){for(const t of e)if(!go(t,{upTo:n}))return t}function go(e,{upTo:n}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(n!==void 0&&e===n)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function xo(e){return e instanceof HTMLInputElement&&"select"in e}function J(e,{select:n=!1}={}){if(e&&e.focus){const t=document.activeElement;e.focus({preventScroll:!0}),e!==t&&xo(e)&&n&&e.select()}}const jt=bo();function bo(){let e=[];return{add(n){const t=e[0];n!==t&&(t==null||t.pause()),e=Dt(e,n),e.unshift(n)},remove(n){var t;e=Dt(e,n),(t=e[0])===null||t===void 0||t.resume()}}}function Dt(e,n){const t=[...e],o=t.indexOf(n);return o!==-1&&t.splice(o,1),t}function yo(e){return e.filter(n=>n.tagName!=="A")}const Co=r.forwardRef((e,n)=>{var t;const{container:o=globalThis==null||(t=globalThis.document)===null||t===void 0?void 0:t.body,...a}=e;return o?rr.createPortal(r.createElement(K.div,T({},a,{ref:n})),o):null});function Eo(e,n){return r.useReducer((t,o)=>{const a=n[t][o];return a??t},e)}const Ue=e=>{const{present:n,children:t}=e,o=$o(n),a=typeof t=="function"?t({present:o.isPresent}):r.Children.only(t),s=Ae(o.ref,a.ref);return typeof t=="function"||o.isPresent?r.cloneElement(a,{ref:s}):null};Ue.displayName="Presence";function $o(e){const[n,t]=r.useState(),o=r.useRef({}),a=r.useRef(e),s=r.useRef("none"),l=e?"mounted":"unmounted",[i,d]=Eo(l,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return r.useEffect(()=>{const u=Fe(o.current);s.current=i==="mounted"?u:"none"},[i]),ot(()=>{const u=o.current,f=a.current;if(f!==e){const C=s.current,g=Fe(u);e?d("MOUNT"):g==="none"||(u==null?void 0:u.display)==="none"?d("UNMOUNT"):d(f&&C!==g?"ANIMATION_OUT":"UNMOUNT"),a.current=e}},[e,d]),ot(()=>{if(n){const u=h=>{const g=Fe(o.current).includes(h.animationName);h.target===n&&g&&Ft.flushSync(()=>d("ANIMATION_END"))},f=h=>{h.target===n&&(s.current=Fe(o.current))};return n.addEventListener("animationstart",f),n.addEventListener("animationcancel",u),n.addEventListener("animationend",u),()=>{n.removeEventListener("animationstart",f),n.removeEventListener("animationcancel",u),n.removeEventListener("animationend",u)}}else d("ANIMATION_END")},[n,d]),{isPresent:["mounted","unmountSuspended"].includes(i),ref:r.useCallback(u=>{u&&(o.current=getComputedStyle(u)),t(u)},[])}}function Fe(e){return(e==null?void 0:e.animationName)||"none"}let Ge=0;function wo(){r.useEffect(()=>{var e,n;const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",(e=t[0])!==null&&e!==void 0?e:Ot()),document.body.insertAdjacentElement("beforeend",(n=t[1])!==null&&n!==void 0?n:Ot()),Ge++,()=>{Ge===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(o=>o.remove()),Ge--}},[])}function Ot(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.cssText="outline: none; opacity: 0; position: fixed; pointer-events: none",e}var en=yr(),Ye=function(){},Be=r.forwardRef(function(e,n){var t=r.useRef(null),o=r.useState({onScrollCapture:Ye,onWheelCapture:Ye,onTouchMoveCapture:Ye}),a=o[0],s=o[1],l=e.forwardProps,i=e.children,d=e.className,u=e.removeScrollBar,f=e.enabled,h=e.shards,C=e.sideCar,g=e.noIsolation,S=e.inert,v=e.allowPinchZoom,x=e.as,p=x===void 0?"div":x,E=Cr(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as"]),N=C,$=Er([t,n]),P=xe(xe({},E),a);return r.createElement(r.Fragment,null,f&&r.createElement(N,{sideCar:en,removeScrollBar:u,shards:h,noIsolation:g,inert:S,setCallbacks:s,allowPinchZoom:!!v,lockRef:t}),l?r.cloneElement(r.Children.only(i),xe(xe({},P),{ref:$})):r.createElement(p,xe({},P,{className:d,ref:$}),i))});Be.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Be.classNames={fullWidth:$r,zeroRight:wr};var ct=!1;if(typeof window<"u")try{var Me=Object.defineProperty({},"passive",{get:function(){return ct=!0,!0}});window.addEventListener("test",Me,Me),window.removeEventListener("test",Me,Me)}catch{ct=!1}var he=ct?{passive:!1}:!1,No=function(e){return e.tagName==="TEXTAREA"},tn=function(e,n){var t=window.getComputedStyle(e);return t[n]!=="hidden"&&!(t.overflowY===t.overflowX&&!No(e)&&t[n]==="visible")},Ro=function(e){return tn(e,"overflowY")},So=function(e){return tn(e,"overflowX")},At=function(e,n){var t=n;do{typeof ShadowRoot<"u"&&t instanceof ShadowRoot&&(t=t.host);var o=nn(e,t);if(o){var a=rn(e,t),s=a[1],l=a[2];if(s>l)return!0}t=t.parentNode}while(t&&t!==document.body);return!1},Po=function(e){var n=e.scrollTop,t=e.scrollHeight,o=e.clientHeight;return[n,t,o]},jo=function(e){var n=e.scrollLeft,t=e.scrollWidth,o=e.clientWidth;return[n,t,o]},nn=function(e,n){return e==="v"?Ro(n):So(n)},rn=function(e,n){return e==="v"?Po(n):jo(n)},Do=function(e,n){return e==="h"&&n==="rtl"?-1:1},Oo=function(e,n,t,o,a){var s=Do(e,window.getComputedStyle(n).direction),l=s*o,i=t.target,d=n.contains(i),u=!1,f=l>0,h=0,C=0;do{var g=rn(e,i),S=g[0],v=g[1],x=g[2],p=v-x-s*S;(S||p)&&nn(e,i)&&(h+=p,C+=S),i=i.parentNode}while(!d&&i!==document.body||d&&(n.contains(i)||n===i));return(f&&(h===0||!a)||!f&&(C===0||!a))&&(u=!0),u},Le=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},kt=function(e){return[e.deltaX,e.deltaY]},It=function(e){return e&&"current"in e?e.current:e},Ao=function(e,n){return e[0]===n[0]&&e[1]===n[1]},ko=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},Io=0,ge=[];function _o(e){var n=r.useRef([]),t=r.useRef([0,0]),o=r.useRef(),a=r.useState(Io++)[0],s=r.useState(function(){return Nr()})[0],l=r.useRef(e);r.useEffect(function(){l.current=e},[e]),r.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(a));var v=Rr([e.lockRef.current],(e.shards||[]).map(It),!0).filter(Boolean);return v.forEach(function(x){return x.classList.add("allow-interactivity-".concat(a))}),function(){document.body.classList.remove("block-interactivity-".concat(a)),v.forEach(function(x){return x.classList.remove("allow-interactivity-".concat(a))})}}},[e.inert,e.lockRef.current,e.shards]);var i=r.useCallback(function(v,x){if("touches"in v&&v.touches.length===2)return!l.current.allowPinchZoom;var p=Le(v),E=t.current,N="deltaX"in v?v.deltaX:E[0]-p[0],$="deltaY"in v?v.deltaY:E[1]-p[1],P,D=v.target,O=Math.abs(N)>Math.abs($)?"h":"v";if("touches"in v&&O==="h"&&D.type==="range")return!1;var j=At(O,D);if(!j)return!0;if(j?P=O:(P=O==="v"?"h":"v",j=At(O,D)),!j)return!1;if(!o.current&&"changedTouches"in v&&(N||$)&&(o.current=P),!P)return!0;var _=o.current||P;return Oo(_,x,v,_==="h"?N:$,!0)},[]),d=r.useCallback(function(v){var x=v;if(!(!ge.length||ge[ge.length-1]!==s)){var p="deltaY"in x?kt(x):Le(x),E=n.current.filter(function(P){return P.name===x.type&&P.target===x.target&&Ao(P.delta,p)})[0];if(E&&E.should){x.cancelable&&x.preventDefault();return}if(!E){var N=(l.current.shards||[]).map(It).filter(Boolean).filter(function(P){return P.contains(x.target)}),$=N.length>0?i(x,N[0]):!l.current.noIsolation;$&&x.cancelable&&x.preventDefault()}}},[]),u=r.useCallback(function(v,x,p,E){var N={name:v,delta:x,target:p,should:E};n.current.push(N),setTimeout(function(){n.current=n.current.filter(function($){return $!==N})},1)},[]),f=r.useCallback(function(v){t.current=Le(v),o.current=void 0},[]),h=r.useCallback(function(v){u(v.type,kt(v),v.target,i(v,e.lockRef.current))},[]),C=r.useCallback(function(v){u(v.type,Le(v),v.target,i(v,e.lockRef.current))},[]);r.useEffect(function(){return ge.push(s),e.setCallbacks({onScrollCapture:h,onWheelCapture:h,onTouchMoveCapture:C}),document.addEventListener("wheel",d,he),document.addEventListener("touchmove",d,he),document.addEventListener("touchstart",f,he),function(){ge=ge.filter(function(v){return v!==s}),document.removeEventListener("wheel",d,he),document.removeEventListener("touchmove",d,he),document.removeEventListener("touchstart",f,he)}},[]);var g=e.removeScrollBar,S=e.inert;return r.createElement(r.Fragment,null,S?r.createElement(s,{styles:ko(a)}):null,g?r.createElement(Sr,{gapMode:"margin"}):null)}const To=Pr(en,_o);var on=r.forwardRef(function(e,n){return r.createElement(Be,xe({},e,{ref:n,sideCar:To}))});on.classNames=Be.classNames;const an="Dialog",[sn,es]=Gr(an),[Fo,me]=sn(an),Mo=e=>{const{__scopeDialog:n,children:t,open:o,defaultOpen:a,onOpenChange:s,modal:l=!0}=e,i=r.useRef(null),d=r.useRef(null),[u=!1,f]=Jr({prop:o,defaultProp:a,onChange:s});return r.createElement(Fo,{scope:n,triggerRef:i,contentRef:d,contentId:qe(),titleId:qe(),descriptionId:qe(),open:u,onOpenChange:f,onOpenToggle:r.useCallback(()=>f(h=>!h),[f]),modal:l},t)},cn="DialogPortal",[Lo,ln]=sn(cn,{forceMount:void 0}),Wo=e=>{const{__scopeDialog:n,forceMount:t,children:o,container:a}=e,s=me(cn,n);return r.createElement(Lo,{scope:n,forceMount:t},r.Children.map(o,l=>r.createElement(Ue,{present:t||s.open},r.createElement(Co,{asChild:!0,container:a},l))))},it="DialogOverlay",Uo=r.forwardRef((e,n)=>{const t=ln(it,e.__scopeDialog),{forceMount:o=t.forceMount,...a}=e,s=me(it,e.__scopeDialog);return s.modal?r.createElement(Ue,{present:o||s.open},r.createElement(Bo,T({},a,{ref:n}))):null}),Bo=r.forwardRef((e,n)=>{const{__scopeDialog:t,...o}=e,a=me(it,t);return r.createElement(on,{as:ft,allowPinchZoom:!0,shards:[a.contentRef]},r.createElement(K.div,T({"data-state":un(a.open)},o,{ref:n,style:{pointerEvents:"auto",...o.style}})))}),Pe="DialogContent",Vo=r.forwardRef((e,n)=>{const t=ln(Pe,e.__scopeDialog),{forceMount:o=t.forceMount,...a}=e,s=me(Pe,e.__scopeDialog);return r.createElement(Ue,{present:o||s.open},s.modal?r.createElement(Ko,T({},a,{ref:n})):r.createElement(Ho,T({},a,{ref:n})))}),Ko=r.forwardRef((e,n)=>{const t=me(Pe,e.__scopeDialog),o=r.useRef(null),a=Ae(n,t.contentRef,o);return r.useEffect(()=>{const s=o.current;if(s)return ut(s)},[]),r.createElement(dn,T({},e,{ref:a,trapFocus:t.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Ce(e.onCloseAutoFocus,s=>{var l;s.preventDefault(),(l=t.triggerRef.current)===null||l===void 0||l.focus()}),onPointerDownOutside:Ce(e.onPointerDownOutside,s=>{const l=s.detail.originalEvent,i=l.button===0&&l.ctrlKey===!0;(l.button===2||i)&&s.preventDefault()}),onFocusOutside:Ce(e.onFocusOutside,s=>s.preventDefault())}))}),Ho=r.forwardRef((e,n)=>{const t=me(Pe,e.__scopeDialog),o=r.useRef(!1),a=r.useRef(!1);return r.createElement(dn,T({},e,{ref:n,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:s=>{var l;if((l=e.onCloseAutoFocus)===null||l===void 0||l.call(e,s),!s.defaultPrevented){var i;o.current||(i=t.triggerRef.current)===null||i===void 0||i.focus(),s.preventDefault()}o.current=!1,a.current=!1},onInteractOutside:s=>{var l,i;(l=e.onInteractOutside)===null||l===void 0||l.call(e,s),s.defaultPrevented||(o.current=!0,s.detail.originalEvent.type==="pointerdown"&&(a.current=!0));const d=s.target;((i=t.triggerRef.current)===null||i===void 0?void 0:i.contains(d))&&s.preventDefault(),s.detail.originalEvent.type==="focusin"&&a.current&&s.preventDefault()}}))}),dn=r.forwardRef((e,n)=>{const{__scopeDialog:t,trapFocus:o,onOpenAutoFocus:a,onCloseAutoFocus:s,...l}=e,i=me(Pe,t),d=r.useRef(null),u=Ae(n,d);return wo(),r.createElement(r.Fragment,null,r.createElement(mo,{asChild:!0,loop:!0,trapped:o,onMountAutoFocus:a,onUnmountAutoFocus:s},r.createElement(uo,T({role:"dialog",id:i.contentId,"aria-describedby":i.descriptionId,"aria-labelledby":i.titleId,"data-state":un(i.open)},l,{ref:u,onDismiss:()=>i.onOpenChange(!1)}))),!1)});function un(e){return e?"open":"closed"}const qo=Mo,zo=Wo,Xo=Uo,Go=Vo;var we='[cmdk-group=""]',Ze='[cmdk-group-items=""]',Yo='[cmdk-group-heading=""]',pt='[cmdk-item=""]',_t=`${pt}:not([aria-disabled="true"])`,lt="cmdk-item-select",ie="data-value",Zo=(e,n,t)=>zr(e,n,t),fn=r.createContext(void 0),ke=()=>r.useContext(fn),pn=r.createContext(void 0),mt=()=>r.useContext(pn),mn=r.createContext(void 0),vn=r.forwardRef((e,n)=>{let t=be(()=>{var m,w;return{search:"",value:(w=(m=e.value)!=null?m:e.defaultValue)!=null?w:"",filtered:{count:0,items:new Map,groups:new Set}}}),o=be(()=>new Set),a=be(()=>new Map),s=be(()=>new Map),l=be(()=>new Set),i=hn(e),{label:d,children:u,value:f,onValueChange:h,filter:C,shouldFilter:g,loop:S,disablePointerSelection:v=!1,vimBindings:x=!0,...p}=e,E=r.useId(),N=r.useId(),$=r.useId(),P=r.useRef(null),D=ia();de(()=>{if(f!==void 0){let m=f.trim();t.current.value=m,O.emit()}},[f]),de(()=>{D(6,ve)},[]);let O=r.useMemo(()=>({subscribe:m=>(l.current.add(m),()=>l.current.delete(m)),snapshot:()=>t.current,setState:(m,w,y)=>{var b,A,k;if(!Object.is(t.current[m],w)){if(t.current[m]=w,m==="search")G(),M(),D(1,B);else if(m==="value"&&(y||D(5,ve),((b=i.current)==null?void 0:b.value)!==void 0)){let V=w??"";(k=(A=i.current).onValueChange)==null||k.call(A,V);return}O.emit()}},emit:()=>{l.current.forEach(m=>m())}}),[]),j=r.useMemo(()=>({value:(m,w,y)=>{var b;w!==((b=s.current.get(m))==null?void 0:b.value)&&(s.current.set(m,{value:w,keywords:y}),t.current.filtered.items.set(m,_(w,y)),D(2,()=>{M(),O.emit()}))},item:(m,w)=>(o.current.add(m),w&&(a.current.has(w)?a.current.get(w).add(m):a.current.set(w,new Set([m]))),D(3,()=>{G(),M(),t.current.value||B(),O.emit()}),()=>{s.current.delete(m),o.current.delete(m),t.current.filtered.items.delete(m);let y=z();D(4,()=>{G(),(y==null?void 0:y.getAttribute("id"))===m&&B(),O.emit()})}),group:m=>(a.current.has(m)||a.current.set(m,new Set),()=>{s.current.delete(m),a.current.delete(m)}),filter:()=>i.current.shouldFilter,label:d||e["aria-label"],disablePointerSelection:v,listId:E,inputId:$,labelId:N,listInnerRef:P}),[]);function _(m,w){var y,b;let A=(b=(y=i.current)==null?void 0:y.filter)!=null?b:Zo;return m?A(m,t.current.search,w):0}function M(){if(!t.current.search||i.current.shouldFilter===!1)return;let m=t.current.filtered.items,w=[];t.current.filtered.groups.forEach(b=>{let A=a.current.get(b),k=0;A.forEach(V=>{let ne=m.get(V);k=Math.max(ne,k)}),w.push([b,k])});let y=P.current;X().sort((b,A)=>{var k,V;let ne=b.getAttribute("id"),_e=A.getAttribute("id");return((k=m.get(_e))!=null?k:0)-((V=m.get(ne))!=null?V:0)}).forEach(b=>{let A=b.closest(Ze);A?A.appendChild(b.parentElement===A?b:b.closest(`${Ze} > *`)):y.appendChild(b.parentElement===y?b:b.closest(`${Ze} > *`))}),w.sort((b,A)=>A[1]-b[1]).forEach(b=>{let A=P.current.querySelector(`${we}[${ie}="${encodeURIComponent(b[0])}"]`);A==null||A.parentElement.appendChild(A)})}function B(){let m=X().find(y=>y.getAttribute("aria-disabled")!=="true"),w=m==null?void 0:m.getAttribute(ie);O.setState("value",w||void 0)}function G(){var m,w,y,b;if(!t.current.search||i.current.shouldFilter===!1){t.current.filtered.count=o.current.size;return}t.current.filtered.groups=new Set;let A=0;for(let k of o.current){let V=(w=(m=s.current.get(k))==null?void 0:m.value)!=null?w:"",ne=(b=(y=s.current.get(k))==null?void 0:y.keywords)!=null?b:[],_e=_(V,ne);t.current.filtered.items.set(k,_e),_e>0&&A++}for(let[k,V]of a.current)for(let ne of V)if(t.current.filtered.items.get(ne)>0){t.current.filtered.groups.add(k);break}t.current.filtered.count=A}function ve(){var m,w,y;let b=z();b&&(((m=b.parentElement)==null?void 0:m.firstChild)===b&&((y=(w=b.closest(we))==null?void 0:w.querySelector(Yo))==null||y.scrollIntoView({block:"nearest"})),b.scrollIntoView({block:"nearest"}))}function z(){var m;return(m=P.current)==null?void 0:m.querySelector(`${pt}[aria-selected="true"]`)}function X(){var m;return Array.from((m=P.current)==null?void 0:m.querySelectorAll(_t))}function Y(m){let w=X()[m];w&&O.setState("value",w.getAttribute(ie))}function te(m){var w;let y=z(),b=X(),A=b.findIndex(V=>V===y),k=b[A+m];(w=i.current)!=null&&w.loop&&(k=A+m<0?b[b.length-1]:A+m===b.length?b[0]:b[A+m]),k&&O.setState("value",k.getAttribute(ie))}function Z(m){let w=z(),y=w==null?void 0:w.closest(we),b;for(;y&&!b;)y=m>0?sa(y,we):ca(y,we),b=y==null?void 0:y.querySelector(_t);b?O.setState("value",b.getAttribute(ie)):te(m)}let R=()=>Y(X().length-1),I=m=>{m.preventDefault(),m.metaKey?R():m.altKey?Z(1):te(1)},L=m=>{m.preventDefault(),m.metaKey?Y(0):m.altKey?Z(-1):te(-1)};return r.createElement(K.div,{ref:n,tabIndex:-1,...p,"cmdk-root":"",onKeyDown:m=>{var w;if((w=p.onKeyDown)==null||w.call(p,m),!m.defaultPrevented)switch(m.key){case"n":case"j":{x&&m.ctrlKey&&I(m);break}case"ArrowDown":{I(m);break}case"p":case"k":{x&&m.ctrlKey&&L(m);break}case"ArrowUp":{L(m);break}case"Home":{m.preventDefault(),Y(0);break}case"End":{m.preventDefault(),R();break}case"Enter":if(!m.nativeEvent.isComposing&&m.keyCode!==229){m.preventDefault();let y=z();if(y){let b=new Event(lt);y.dispatchEvent(b)}}}}},r.createElement("label",{"cmdk-label":"",htmlFor:j.inputId,id:j.labelId,style:da},d),Ve(e,m=>r.createElement(pn.Provider,{value:O},r.createElement(fn.Provider,{value:j},m))))}),Qo=r.forwardRef((e,n)=>{var t,o;let a=r.useId(),s=r.useRef(null),l=r.useContext(mn),i=ke(),d=hn(e),u=(o=(t=d.current)==null?void 0:t.forceMount)!=null?o:l==null?void 0:l.forceMount;de(()=>{if(!u)return i.item(a,l==null?void 0:l.id)},[u]);let f=gn(a,s,[e.value,e.children,s],e.keywords),h=mt(),C=ue(D=>D.value&&D.value===f.current),g=ue(D=>u||i.filter()===!1?!0:D.search?D.filtered.items.get(a)>0:!0);r.useEffect(()=>{let D=s.current;if(!(!D||e.disabled))return D.addEventListener(lt,S),()=>D.removeEventListener(lt,S)},[g,e.onSelect,e.disabled]);function S(){var D,O;v(),(O=(D=d.current).onSelect)==null||O.call(D,f.current)}function v(){h.setState("value",f.current,!0)}if(!g)return null;let{disabled:x,value:p,onSelect:E,forceMount:N,keywords:$,...P}=e;return r.createElement(K.div,{ref:je([s,n]),...P,id:a,"cmdk-item":"",role:"option","aria-disabled":!!x,"aria-selected":!!C,"data-disabled":!!x,"data-selected":!!C,onPointerMove:x||i.disablePointerSelection?void 0:v,onClick:x?void 0:S},e.children)}),Jo=r.forwardRef((e,n)=>{let{heading:t,children:o,forceMount:a,...s}=e,l=r.useId(),i=r.useRef(null),d=r.useRef(null),u=r.useId(),f=ke(),h=ue(g=>a||f.filter()===!1?!0:g.search?g.filtered.groups.has(l):!0);de(()=>f.group(l),[]),gn(l,i,[e.value,e.heading,d]);let C=r.useMemo(()=>({id:l,forceMount:a}),[a]);return r.createElement(K.div,{ref:je([i,n]),...s,"cmdk-group":"",role:"presentation",hidden:h?void 0:!0},t&&r.createElement("div",{ref:d,"cmdk-group-heading":"","aria-hidden":!0,id:u},t),Ve(e,g=>r.createElement("div",{"cmdk-group-items":"",role:"group","aria-labelledby":t?u:void 0},r.createElement(mn.Provider,{value:C},g))))}),ea=r.forwardRef((e,n)=>{let{alwaysRender:t,...o}=e,a=r.useRef(null),s=ue(l=>!l.search);return!t&&!s?null:r.createElement(K.div,{ref:je([a,n]),...o,"cmdk-separator":"",role:"separator"})}),ta=r.forwardRef((e,n)=>{let{onValueChange:t,...o}=e,a=e.value!=null,s=mt(),l=ue(f=>f.search),i=ue(f=>f.value),d=ke(),u=r.useMemo(()=>{var f;let h=(f=d.listInnerRef.current)==null?void 0:f.querySelector(`${pt}[${ie}="${encodeURIComponent(i)}"]`);return h==null?void 0:h.getAttribute("id")},[]);return r.useEffect(()=>{e.value!=null&&s.setState("search",e.value)},[e.value]),r.createElement(K.input,{ref:n,...o,"cmdk-input":"",autoComplete:"off",autoCorrect:"off",spellCheck:!1,"aria-autocomplete":"list",role:"combobox","aria-expanded":!0,"aria-controls":d.listId,"aria-labelledby":d.labelId,"aria-activedescendant":u,id:d.inputId,type:"text",value:a?e.value:l,onChange:f=>{a||s.setState("search",f.target.value),t==null||t(f.target.value)}})}),na=r.forwardRef((e,n)=>{let{children:t,label:o="Suggestions",...a}=e,s=r.useRef(null),l=r.useRef(null),i=ke();return r.useEffect(()=>{if(l.current&&s.current){let d=l.current,u=s.current,f,h=new ResizeObserver(()=>{f=requestAnimationFrame(()=>{let C=d.offsetHeight;u.style.setProperty("--cmdk-list-height",C.toFixed(1)+"px")})});return h.observe(d),()=>{cancelAnimationFrame(f),h.unobserve(d)}}},[]),r.createElement(K.div,{ref:je([s,n]),...a,"cmdk-list":"",role:"listbox","aria-label":o,id:i.listId},Ve(e,d=>r.createElement("div",{ref:je([l,i.listInnerRef]),"cmdk-list-sizer":""},d)))}),ra=r.forwardRef((e,n)=>{let{open:t,onOpenChange:o,overlayClassName:a,contentClassName:s,container:l,...i}=e;return r.createElement(qo,{open:t,onOpenChange:o},r.createElement(zo,{container:l},r.createElement(Xo,{"cmdk-overlay":"",className:a}),r.createElement(Go,{"aria-label":e.label,"cmdk-dialog":"",className:s},r.createElement(vn,{ref:n,...i}))))}),oa=r.forwardRef((e,n)=>ue(t=>t.filtered.count===0)?r.createElement(K.div,{ref:n,...e,"cmdk-empty":"",role:"presentation"}):null),aa=r.forwardRef((e,n)=>{let{progress:t,children:o,label:a="Loading...",...s}=e;return r.createElement(K.div,{ref:n,...s,"cmdk-loading":"",role:"progressbar","aria-valuenow":t,"aria-valuemin":0,"aria-valuemax":100,"aria-label":a},Ve(e,l=>r.createElement("div",{"aria-hidden":!0},l)))}),W=Object.assign(vn,{List:na,Item:Qo,Input:ta,Group:Jo,Separator:ea,Dialog:ra,Empty:oa,Loading:aa});function sa(e,n){let t=e.nextElementSibling;for(;t;){if(t.matches(n))return t;t=t.nextElementSibling}}function ca(e,n){let t=e.previousElementSibling;for(;t;){if(t.matches(n))return t;t=t.previousElementSibling}}function hn(e){let n=r.useRef(e);return de(()=>{n.current=e}),n}var de=typeof window>"u"?r.useEffect:r.useLayoutEffect;function be(e){let n=r.useRef();return n.current===void 0&&(n.current=e()),n}function je(e){return n=>{e.forEach(t=>{typeof t=="function"?t(n):t!=null&&(t.current=n)})}}function ue(e){let n=mt(),t=()=>e(n.snapshot());return r.useSyncExternalStore(n.subscribe,t,t)}function gn(e,n,t,o=[]){let a=r.useRef(),s=ke();return de(()=>{var l;let i=(()=>{var u;for(let f of t){if(typeof f=="string")return f.trim();if(typeof f=="object"&&"current"in f)return f.current?(u=f.current.textContent)==null?void 0:u.trim():a.current}})(),d=o.map(u=>u.trim());s.value(e,i,d),(l=n.current)==null||l.setAttribute(ie,i),a.current=i}),a}var ia=()=>{let[e,n]=r.useState(),t=be(()=>new Map);return de(()=>{t.current.forEach(o=>o()),t.current=new Map},[e]),(o,a)=>{t.current.set(o,a),n({})}};function la(e){let n=e.type;return typeof n=="function"?n(e.props):"render"in n?n.render(e.props):e}function Ve({asChild:e,children:n},t){return e&&r.isValidElement(n)?r.cloneElement(la(n),{ref:n.ref},t(n.props.children)):t(n)}var da={position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0"},xn="Dialog",[bn,ts]=Mt(xn),[ns,H]=bn(xn),yn="DialogTrigger",ua=r.forwardRef((e,n)=>{const{__scopeDialog:t,...o}=e,a=H(yn,t),s=De(n,a.triggerRef);return c.jsx(pe.button,{type:"button","aria-haspopup":"dialog","aria-expanded":a.open,"aria-controls":a.contentId,"data-state":gt(a.open),...o,ref:s,onClick:q(e.onClick,a.onOpenToggle)})});ua.displayName=yn;var vt="DialogPortal",[fa,Cn]=bn(vt,{forceMount:void 0}),En=e=>{const{__scopeDialog:n,forceMount:t,children:o,container:a}=e,s=H(vt,n);return c.jsx(fa,{scope:n,forceMount:t,children:r.Children.map(o,l=>c.jsx(Oe,{present:t||s.open,children:c.jsx(Ut,{asChild:!0,container:a,children:l})}))})};En.displayName=vt;var We="DialogOverlay",$n=r.forwardRef((e,n)=>{const t=Cn(We,e.__scopeDialog),{forceMount:o=t.forceMount,...a}=e,s=H(We,e.__scopeDialog);return s.modal?c.jsx(Oe,{present:o||s.open,children:c.jsx(pa,{...a,ref:n})}):null});$n.displayName=We;var pa=r.forwardRef((e,n)=>{const{__scopeDialog:t,...o}=e,a=H(We,t);return c.jsx(Ht,{as:Lt,allowPinchZoom:!0,shards:[a.contentRef],children:c.jsx(pe.div,{"data-state":gt(a.open),...o,ref:n,style:{pointerEvents:"auto",...o.style}})})}),fe="DialogContent",wn=r.forwardRef((e,n)=>{const t=Cn(fe,e.__scopeDialog),{forceMount:o=t.forceMount,...a}=e,s=H(fe,e.__scopeDialog);return c.jsx(Oe,{present:o||s.open,children:s.modal?c.jsx(ma,{...a,ref:n}):c.jsx(va,{...a,ref:n})})});wn.displayName=fe;var ma=r.forwardRef((e,n)=>{const t=H(fe,e.__scopeDialog),o=r.useRef(null),a=De(n,t.contentRef,o);return r.useEffect(()=>{const s=o.current;if(s)return ut(s)},[]),c.jsx(Nn,{...e,ref:a,trapFocus:t.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:q(e.onCloseAutoFocus,s=>{var l;s.preventDefault(),(l=t.triggerRef.current)==null||l.focus()}),onPointerDownOutside:q(e.onPointerDownOutside,s=>{const l=s.detail.originalEvent,i=l.button===0&&l.ctrlKey===!0;(l.button===2||i)&&s.preventDefault()}),onFocusOutside:q(e.onFocusOutside,s=>s.preventDefault())})}),va=r.forwardRef((e,n)=>{const t=H(fe,e.__scopeDialog),o=r.useRef(!1),a=r.useRef(!1);return c.jsx(Nn,{...e,ref:n,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:s=>{var l,i;(l=e.onCloseAutoFocus)==null||l.call(e,s),s.defaultPrevented||(o.current||(i=t.triggerRef.current)==null||i.focus(),s.preventDefault()),o.current=!1,a.current=!1},onInteractOutside:s=>{var d,u;(d=e.onInteractOutside)==null||d.call(e,s),s.defaultPrevented||(o.current=!0,s.detail.originalEvent.type==="pointerdown"&&(a.current=!0));const l=s.target;((u=t.triggerRef.current)==null?void 0:u.contains(l))&&s.preventDefault(),s.detail.originalEvent.type==="focusin"&&a.current&&s.preventDefault()}})}),Nn=r.forwardRef((e,n)=>{const{__scopeDialog:t,trapFocus:o,onOpenAutoFocus:a,onCloseAutoFocus:s,...l}=e,i=H(fe,t),d=r.useRef(null),u=De(n,d);return qt(),c.jsxs(c.Fragment,{children:[c.jsx(zt,{asChild:!0,loop:!0,trapped:o,onMountAutoFocus:a,onUnmountAutoFocus:s,children:c.jsx(Wt,{role:"dialog",id:i.contentId,"aria-describedby":i.descriptionId,"aria-labelledby":i.titleId,"data-state":gt(i.open),...l,ref:u,onDismiss:()=>i.onOpenChange(!1)})}),c.jsxs(c.Fragment,{children:[c.jsx(ha,{titleId:i.titleId}),c.jsx(xa,{contentRef:d,descriptionId:i.descriptionId})]})]})}),ht="DialogTitle",Rn=r.forwardRef((e,n)=>{const{__scopeDialog:t,...o}=e,a=H(ht,t);return c.jsx(pe.h2,{id:a.titleId,...o,ref:n})});Rn.displayName=ht;var Sn="DialogDescription",Pn=r.forwardRef((e,n)=>{const{__scopeDialog:t,...o}=e,a=H(Sn,t);return c.jsx(pe.p,{id:a.descriptionId,...o,ref:n})});Pn.displayName=Sn;var jn="DialogClose",Dn=r.forwardRef((e,n)=>{const{__scopeDialog:t,...o}=e,a=H(jn,t);return c.jsx(pe.button,{type:"button",...o,ref:n,onClick:q(e.onClick,()=>a.onOpenChange(!1))})});Dn.displayName=jn;function gt(e){return e?"open":"closed"}var On="DialogTitleWarning",[rs,An]=or(On,{contentName:fe,titleName:ht,docsSlug:"dialog"}),ha=({titleId:e})=>{const n=An(On),t=`\`${n.contentName}\` requires a \`${n.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${n.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${n.docsSlug}`;return r.useEffect(()=>{e&&(document.getElementById(e)||console.error(t))},[t,e]),null},ga="DialogDescriptionWarning",xa=({contentRef:e,descriptionId:n})=>{const o=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${An(ga).contentName}}.`;return r.useEffect(()=>{var s;const a=(s=e.current)==null?void 0:s.getAttribute("aria-describedby");n&&a&&(document.getElementById(n)||console.warn(o))},[o,e,n]),null},ba=En,kn=$n,In=wn,_n=Rn,Tn=Pn,ya=Dn;const Ca=ba,Fn=r.forwardRef(({className:e,...n},t)=>c.jsx(kn,{ref:t,className:F("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...n}));Fn.displayName=kn.displayName;const Ea=r.forwardRef(({className:e,children:n,...t},o)=>c.jsxs(Ca,{children:[c.jsx(Fn,{}),c.jsxs(In,{ref:o,className:F("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...t,children:[n,c.jsxs(ya,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[c.jsx(ar,{className:"h-4 w-4"}),c.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));Ea.displayName=In.displayName;const $a=r.forwardRef(({className:e,...n},t)=>c.jsx(_n,{ref:t,className:F("text-lg font-semibold leading-none tracking-tight",e),...n}));$a.displayName=_n.displayName;const wa=r.forwardRef(({className:e,...n},t)=>c.jsx(Tn,{ref:t,className:F("text-sm text-muted-foreground",e),...n}));wa.displayName=Tn.displayName;const Mn=r.forwardRef(({className:e,...n},t)=>c.jsx(W,{ref:t,className:F("flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground",e),...n}));Mn.displayName=W.displayName;const Ln=r.forwardRef(({className:e,...n},t)=>c.jsxs("div",{className:"flex items-center border-b px-3","cmdk-input-wrapper":"",children:[c.jsx(kr,{className:"mr-2 h-4 w-4 shrink-0 opacity-50"}),c.jsx(W.Input,{ref:t,className:F("flex h-11 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50",e),...n})]}));Ln.displayName=W.Input.displayName;const Wn=r.forwardRef(({className:e,...n},t)=>c.jsx(W.List,{ref:t,className:F("max-h-[300px] overflow-y-auto overflow-x-hidden",e),...n}));Wn.displayName=W.List.displayName;const Un=r.forwardRef((e,n)=>c.jsx(W.Empty,{ref:n,className:"py-6 text-center text-sm",...e}));Un.displayName=W.Empty.displayName;const Na=r.forwardRef(({className:e,...n},t)=>c.jsx(W.Group,{ref:t,className:F("overflow-hidden p-1 text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground",e),...n}));Na.displayName=W.Group.displayName;const Ra=r.forwardRef(({className:e,...n},t)=>c.jsx(W.Separator,{ref:t,className:F("-mx-1 h-px bg-border",e),...n}));Ra.displayName=W.Separator.displayName;const Bn=r.forwardRef(({className:e,...n},t)=>c.jsx(W.Item,{ref:t,className:F("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[disabled=true]:pointer-events-none data-[selected='true']:bg-accent data-[selected=true]:text-accent-foreground data-[disabled=true]:opacity-50",e),...n}));Bn.displayName=W.Item.displayName;var xt="Popover",[Vn,os]=Mt(xt,[Bt]),Ie=Bt(),[Sa,ee]=Vn(xt),Kn=e=>{const{__scopePopover:n,children:t,open:o,defaultOpen:a,onOpenChange:s,modal:l=!1}=e,i=Ie(n),d=r.useRef(null),[u,f]=r.useState(!1),[h=!1,C]=ir({prop:o,defaultProp:a,onChange:s});return c.jsx(lr,{...i,children:c.jsx(Sa,{scope:n,contentId:Dr(),triggerRef:d,open:h,onOpenChange:C,onOpenToggle:r.useCallback(()=>C(g=>!g),[C]),hasCustomAnchor:u,onCustomAnchorAdd:r.useCallback(()=>f(!0),[]),onCustomAnchorRemove:r.useCallback(()=>f(!1),[]),modal:l,children:t})})};Kn.displayName=xt;var Hn="PopoverAnchor",Pa=r.forwardRef((e,n)=>{const{__scopePopover:t,...o}=e,a=ee(Hn,t),s=Ie(t),{onCustomAnchorAdd:l,onCustomAnchorRemove:i}=a;return r.useEffect(()=>(l(),()=>i()),[l,i]),c.jsx(Vt,{...s,...o,ref:n})});Pa.displayName=Hn;var qn="PopoverTrigger",zn=r.forwardRef((e,n)=>{const{__scopePopover:t,...o}=e,a=ee(qn,t),s=Ie(t),l=De(n,a.triggerRef),i=c.jsx(pe.button,{type:"button","aria-haspopup":"dialog","aria-expanded":a.open,"aria-controls":a.contentId,"data-state":Qn(a.open),...o,ref:l,onClick:q(e.onClick,a.onOpenToggle)});return a.hasCustomAnchor?i:c.jsx(Vt,{asChild:!0,...s,children:i})});zn.displayName=qn;var bt="PopoverPortal",[ja,Da]=Vn(bt,{forceMount:void 0}),Xn=e=>{const{__scopePopover:n,forceMount:t,children:o,container:a}=e,s=ee(bt,n);return c.jsx(ja,{scope:n,forceMount:t,children:c.jsx(Oe,{present:t||s.open,children:c.jsx(Ut,{asChild:!0,container:a,children:o})})})};Xn.displayName=bt;var Ee="PopoverContent",Gn=r.forwardRef((e,n)=>{const t=Da(Ee,e.__scopePopover),{forceMount:o=t.forceMount,...a}=e,s=ee(Ee,e.__scopePopover);return c.jsx(Oe,{present:o||s.open,children:s.modal?c.jsx(Oa,{...a,ref:n}):c.jsx(Aa,{...a,ref:n})})});Gn.displayName=Ee;var Oa=r.forwardRef((e,n)=>{const t=ee(Ee,e.__scopePopover),o=r.useRef(null),a=De(n,o),s=r.useRef(!1);return r.useEffect(()=>{const l=o.current;if(l)return ut(l)},[]),c.jsx(Ht,{as:Lt,allowPinchZoom:!0,children:c.jsx(Yn,{...e,ref:a,trapFocus:t.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:q(e.onCloseAutoFocus,l=>{var i;l.preventDefault(),s.current||(i=t.triggerRef.current)==null||i.focus()}),onPointerDownOutside:q(e.onPointerDownOutside,l=>{const i=l.detail.originalEvent,d=i.button===0&&i.ctrlKey===!0,u=i.button===2||d;s.current=u},{checkForDefaultPrevented:!1}),onFocusOutside:q(e.onFocusOutside,l=>l.preventDefault(),{checkForDefaultPrevented:!1})})})}),Aa=r.forwardRef((e,n)=>{const t=ee(Ee,e.__scopePopover),o=r.useRef(!1),a=r.useRef(!1);return c.jsx(Yn,{...e,ref:n,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:s=>{var l,i;(l=e.onCloseAutoFocus)==null||l.call(e,s),s.defaultPrevented||(o.current||(i=t.triggerRef.current)==null||i.focus(),s.preventDefault()),o.current=!1,a.current=!1},onInteractOutside:s=>{var d,u;(d=e.onInteractOutside)==null||d.call(e,s),s.defaultPrevented||(o.current=!0,s.detail.originalEvent.type==="pointerdown"&&(a.current=!0));const l=s.target;((u=t.triggerRef.current)==null?void 0:u.contains(l))&&s.preventDefault(),s.detail.originalEvent.type==="focusin"&&a.current&&s.preventDefault()}})}),Yn=r.forwardRef((e,n)=>{const{__scopePopover:t,trapFocus:o,onOpenAutoFocus:a,onCloseAutoFocus:s,disableOutsidePointerEvents:l,onEscapeKeyDown:i,onPointerDownOutside:d,onFocusOutside:u,onInteractOutside:f,...h}=e,C=ee(Ee,t),g=Ie(t);return qt(),c.jsx(zt,{asChild:!0,loop:!0,trapped:o,onMountAutoFocus:a,onUnmountAutoFocus:s,children:c.jsx(Wt,{asChild:!0,disableOutsidePointerEvents:l,onInteractOutside:f,onEscapeKeyDown:i,onPointerDownOutside:d,onFocusOutside:u,onDismiss:()=>C.onOpenChange(!1),children:c.jsx(sr,{"data-state":Qn(C.open),role:"dialog",id:C.contentId,...g,...h,ref:n,style:{...h.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),Zn="PopoverClose",ka=r.forwardRef((e,n)=>{const{__scopePopover:t,...o}=e,a=ee(Zn,t);return c.jsx(pe.button,{type:"button",...o,ref:n,onClick:q(e.onClick,()=>a.onOpenChange(!1))})});ka.displayName=Zn;var Ia="PopoverArrow",_a=r.forwardRef((e,n)=>{const{__scopePopover:t,...o}=e,a=Ie(t);return c.jsx(cr,{...a,...o,ref:n})});_a.displayName=Ia;function Qn(e){return e?"open":"closed"}var Ta=Kn,Fa=zn,Ma=Xn,Jn=Gn;const La=Ta,Wa=Fa,er=r.forwardRef(({className:e,align:n="center",sideOffset:t=4,...o},a)=>c.jsx(Ma,{children:c.jsx(Jn,{ref:a,align:n,sideOffset:t,className:F("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...o})}));er.displayName=Jn.displayName;const Ua=({onSelect:e,className:n=""})=>{var Z;const[t,o]=r.useState([]),[a,s]=r.useState([]),[l,i]=r.useState([]),[d,u]=r.useState(""),[f,h]=r.useState(""),[C,g]=r.useState(""),[S,v]=r.useState(!1),[x,p]=r.useState(null),[E,N]=r.useState(!1),[$,P]=r.useState(!1),[D,O]=r.useState(1),[j,_]=r.useState(!0),[M,B]=r.useState("");r.useEffect(()=>{(async()=>{try{v(!0),p(null);const I=await U.getCities();I.success?o(I.data):p("Не вдалося завантажити список областей")}catch(I){p("Помилка при завантаженні областей"),console.error("Error fetching areas:",I)}finally{v(!1)}})()},[]),r.useEffect(()=>{(async()=>{if(!d){s([]);return}try{v(!0),p(null);const I=await U.getCities(d);I.success?s(I.data):p("Не вдалося завантажити список міст")}catch(I){p("Помилка при завантаженні міст"),console.error("Error fetching cities:",I)}finally{v(!1)}})()},[d]);const G=async(R,I=1)=>{try{P(!0);const L=await U.getWarehouses(R,I);L.success&&L.data?(i(I===1?L.data:m=>[...m,...L.data]),_(L.data.length===50)):(console.error("Failed to load warehouses:",L),p("Не вдалося завантажити список відділень"))}catch(L){console.error("Error loading warehouses:",L),p("Помилка при завантаженні відділень")}finally{P(!1)}},ve=()=>{if(!$&&j&&f){const R=D+1;O(R),G(f,R)}},z=l.filter(R=>R.Description.toLowerCase().includes(M.toLowerCase())),X=R=>{u(R),h(""),g("")},Y=async R=>{h(R),g(""),i([]),O(1),_(!0),N(!1),await G(R)},te=((Z=a.find(R=>R.Ref===f))==null?void 0:Z.Description)||"";return c.jsxs("div",{className:`space-y-4 ${n}`,children:[c.jsxs("div",{className:"space-y-2",children:[c.jsx(Ct,{htmlFor:"area",children:"Область"}),c.jsxs(Qe,{value:d,onValueChange:X,disabled:S,children:[c.jsx(Je,{id:"area",children:c.jsx(et,{placeholder:"Виберіть область"})}),c.jsx(tt,{children:t.map(R=>c.jsx(Ne,{value:R.Ref,children:R.Description},R.Ref))})]})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx(Ct,{htmlFor:"city",children:"Місто"}),c.jsxs(La,{open:E,onOpenChange:N,children:[c.jsx(Wa,{asChild:!0,children:c.jsxs(Re,{variant:"outline",role:"combobox","aria-expanded":E,className:"w-full justify-between",disabled:S||!d,children:[te||"Виберіть місто",c.jsx(Ar,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})}),c.jsx(er,{className:"w-full p-0",children:c.jsxs(Mn,{children:[c.jsx(Ln,{placeholder:"Пошук міста..."}),c.jsxs(Wn,{children:[c.jsx(Un,{children:"Місто не знайдено"}),a.map(R=>c.jsxs(Bn,{value:R.Description,onSelect:()=>Y(R.Ref),children:[c.jsx(jr,{className:F("mr-2 h-4 w-4",f===R.Ref?"opacity-100":"opacity-0")}),R.Description]},R.Ref))]})]})})]})]}),f&&c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Відділення"}),c.jsx("input",{type:"text",placeholder:"Пошук відділення...",value:M,onChange:R=>B(R.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"}),c.jsxs("select",{value:C,onChange:R=>{g(R.target.value),e(f,R.target.value)},className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500",disabled:$,children:[c.jsx("option",{value:"",children:"Виберіть відділення"}),z.map(R=>c.jsx("option",{value:R.Ref,children:R.Description},R.Ref))]}),j&&c.jsx("button",{onClick:ve,disabled:$,className:"w-full mt-2 px-4 py-2 text-sm text-indigo-600 hover:text-indigo-500 disabled:opacity-50",children:$?"Завантаження...":"Завантажити більше"})]}),S&&c.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[c.jsx(Or,{className:"h-4 w-4 animate-spin"}),c.jsx("span",{children:"Завантаження..."})]}),x&&c.jsx("p",{className:"text-red-500",children:x})]})},Tt=ur(e=>({order:null,shipping:null,loading:!1,error:null,setShipping:n=>e({shipping:n}),calculateShippingCost:async(n,t,o,a)=>{e({loading:!0,error:null});try{const s=await U.calculateShippingCost(n,t,o,a);e({shipping:{city:t,warehouse:"",cost:s.Cost,estimatedDeliveryDate:s.EstimatedDeliveryDate},loading:!1})}catch(s){e({error:s instanceof Error?s.message:"Помилка при розрахунку вартості доставки",loading:!1})}},createWaybill:async(n,t,o,a,s)=>{e({loading:!0,error:null});try{const l={CitySender:n.City,SenderAddress:n.Warehouse,Sender:"",ContactSender:"",SendersPhone:n.Phone},i={CityRecipient:t.City,RecipientAddress:t.Warehouse,ContactRecipient:"",RecipientsPhone:t.Phone,Recipient:"",FirstName:t.FirstName,LastName:t.LastName,MiddleName:t.MiddleName},d=await U.createWaybill(l,i,{...o,ServiceType:"WarehouseWarehouse",SeatsAmount:1},a,s);return e(u=>({order:u.order?{...u.order,waybillRef:d,status:"processing",createdAt:new Date().toISOString()}:null,shipping:u.shipping?{...u.shipping,waybillRef:d,status:"processing"}:null,loading:!1})),d}catch(l){throw e({error:l instanceof Error?l.message:"Помилка при створенні накладної",loading:!1}),l}},trackWaybill:async n=>{e({loading:!0,error:null});try{const t=await U.trackWaybill(n);e(o=>({shipping:o.shipping?{...o.shipping,trackingStatus:t.Status,warehouseSender:t.WarehouseSender,warehouseRecipient:t.WarehouseRecipient,scheduledDeliveryDate:t.ScheduledDeliveryDate}:null,loading:!1}))}catch(t){e({error:t instanceof Error?t.message:"Помилка при відстеженні відправлення",loading:!1})}}})),Ba=()=>{const e=Se(o=>o.items),n=Se(o=>o.updateQuantity),t=Se(o=>o.removeFromCart);return c.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6 md:p-8",children:[c.jsx("h2",{className:"text-2xl font-bold mb-6 text-primary-foreground text-center md:text-left",children:"Ваше замовлення"}),!e||e.length===0?c.jsx("div",{className:"text-center py-8 text-lg text-gray-500",children:"Кошик порожній"}):c.jsx("div",{className:"space-y-6 max-h-[600px] overflow-y-auto pr-2",children:e.map(o=>c.jsxs("div",{className:"flex flex-col p-4 border rounded-lg bg-neutral-50 hover:shadow-md transition min-h-[120px]",children:[c.jsxs("div",{className:"flex items-center space-x-4",children:[c.jsx("img",{src:o.image,alt:o.name,className:"w-16 h-16 object-cover rounded-lg border"}),c.jsxs("div",{className:"flex flex-col items-start w-full",children:[c.jsx("h3",{className:"font-semibold text-base",children:o.name}),c.jsxs("p",{className:"text-xs text-gray-500",children:["Ціна: ",yt(o.price)]}),c.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[c.jsx(Re,{type:"button",size:"icon",variant:"outline",onClick:()=>n(o.id,o.quantity-1,o.selectedWeight),className:"h-7 w-7",children:"-"}),c.jsx("span",{className:"font-semibold text-base w-6 text-center",children:o.quantity}),c.jsx(Re,{type:"button",size:"icon",variant:"outline",onClick:()=>n(o.id,o.quantity+1,o.selectedWeight),className:"h-7 w-7",children:"+"})]})]})]}),c.jsxs("div",{className:"flex justify-between items-center w-full mt-2",children:[c.jsx("p",{className:"font-semibold text-base text-primary-foreground",children:yt(o.price*o.quantity)}),c.jsx(Re,{type:"button",size:"icon",variant:"destructive",onClick:()=>t(o.id,o.selectedWeight),className:"h-7 w-7",title:"Видалити",children:c.jsx(Ir,{size:16})})]})]},`${o.id}-${o.selectedWeight}`))})]})},Va=vr({firstName:re().min(2,{message:"Ім'я має бути не менше 2 символів"}),lastName:re().min(2,{message:"Прізвище має бути не менше 2 символів"}),middleName:re().min(2,{message:"По батькові має бути не менше 2 символів"}),phone:re().min(10,{message:"Введіть коректний номер телефону"}),email:re().email({message:"Введіть коректний email"}),city:re(),warehouse:re(),payerType:Et(["Sender","Recipient"]),paymentMethod:Et(["Cash","NonCash"])});function Ka({onSubmit:e,isProcessing:n=!1,defaultValues:t,cartItems:o,total:a}){const s=hr({resolver:gr(Va),defaultValues:{payerType:"Recipient",paymentMethod:"Cash",firstName:"",lastName:"",middleName:"",phone:"",email:"",city:"",warehouse:"",...t}}),l=Tt(p=>p.setShipping),{items:i,removeFromCart:d,updateQuantity:u,clearCart:f}=Se();Tt(p=>p.shipping);const{toast:h}=Kt(),[C,g]=r.useState(null);r.useEffect(()=>{(async()=>{const{data:{session:E}}=await ye.auth.getSession();E&&g(E.user)})()},[]);const S=async(p,E)=>{s.setValue("city",p),s.setValue("warehouse",E);const N=i.reduce(($,P)=>$+P.quantity,0)*.5;try{const $=await U.calculateShippingCost("8d5a980d-391c-11dd-90d9-001a92567626",p,N,a),P={city:p,warehouse:E,cost:$.Cost,estimatedDeliveryDate:$.EstimatedDeliveryDate};l(P)}catch{l({city:p,warehouse:E,cost:0,estimatedDeliveryDate:""})}},v=p=>p.reduce((E,N)=>E+N.selectedWeight*N.quantity+N.quantity*100,0),x=async p=>{try{const E=await U.getCounterparties("Sender");if(!E.success||!E.data||E.data.length===0)throw new Error("Не знайдено відправника");const N=E.data[0].Ref,$=await U.getCounterpartyContactPersons(N);if(!$.success||!$.data||$.data.length===0)throw new Error("Не знайдено контактну особу відправника");const P=$.data[0].Ref,D=await U.getSenderWarehouses("8d5a980d-391c-11dd-90d9-001a92567626");if(!D.success||!D.data||D.data.length===0)throw new Error("Не знайдено відділення відправника");const O=D.data[0].Ref,j=await U.saveCounterparty({CounterpartyType:"PrivatePerson",CounterpartyProperty:"Recipient",CityRef:p.city,FirstName:p.firstName,LastName:p.lastName,MiddleName:p.middleName,Phone:p.phone});if(!j.success||!j.data||!j.data[0])throw new Error("Помилка при створенні отримувача");const _=j.data[0].Ref,M=await U.getCounterpartyContactPersons(_);if(!M.success||!M.data||M.data.length===0)throw new Error("Не знайдено контактну особу отримувача");const B=M.data.find(y=>y.FirstName===p.firstName&&y.LastName===p.lastName&&y.MiddleName===p.middleName);if(!B)throw new Error("Не знайдено контактну особу з такими ПІБ");const G=B.Ref,ve={CitySender:"8d5a980d-391c-11dd-90d9-001a92567626",SenderAddress:O,Sender:N,ContactSender:P,SendersPhone:"+380991112233"},z={CityRecipient:p.city,RecipientAddress:p.warehouse,RecipientsPhone:p.phone,FirstName:p.firstName,LastName:p.lastName,MiddleName:p.middleName,Recipient:_,ContactRecipient:G},X=1,Y=v(i),te=i.reduce((y,b)=>y+b.quantity,0);let Z=i.map(y=>`${y.name} (${y.selectedWeight}g) x${y.quantity}`).join(", "),R=Z.length>100?`Корм для тварин, ${te} шт`:Z;R=R.slice(0,40);const I={Weight:Y/1e3,ServiceType:"WarehouseWarehouse",SeatsAmount:X,Description:R,OptionsSeat:[{volumetricVolume:.1,volumetricWidth:10,volumetricLength:10,volumetricHeight:10,weight:Y/1e3}]},L=await U.createWaybill(ve,z,I,p.payerType,p.paymentMethod),m={name:`${p.lastName} ${p.firstName} ${p.middleName}`,email:p.email,phone:p.phone,warehouse:p.warehouse,city:p.city,waybill_number:L};try{const{data:y,error:b}=await ye.from("orders").select("id").eq("waybill_number",L);if(b&&console.error("Error checking existing order:",b),y&&y.length>0){console.log("Order with this waybill number already exists:",y),h({title:"Помилка",description:"Замовлення з таким номером накладної вже існує",variant:"destructive"});return}}catch(y){console.error("Error checking for duplicate order:",y)}if(!await br(m,i,C?C.id:void 0))throw new Error("Помилка при збереженні замовлення");f(),e(p)}catch(E){console.error("Nova Poshta error:",E),h({title:"Помилка при створенні замовлення",description:E instanceof Error?E.message:"Спробуйте ще раз",variant:"destructive"})}};return c.jsx("div",{className:"container mx-auto px-4 py-8",children:c.jsxs("div",{className:"flex flex-col md:flex-row gap-8",children:[c.jsx("div",{className:"w-full md:w-1/2",children:c.jsx(Ba,{})}),c.jsx("div",{className:"w-full md:w-1/2",children:c.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-4 md:p-6",children:[c.jsx("h2",{className:"text-2xl font-bold mb-6 text-primary-foreground text-center md:text-left",children:"Оформлення замовлення"}),c.jsx(xr,{...s,children:c.jsxs("form",{onSubmit:s.handleSubmit(x),className:"space-y-8",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[c.jsx(oe,{control:s.control,name:"firstName",render:({field:p})=>c.jsxs(ae,{children:[c.jsx(Q,{children:"Ім'я"}),c.jsx(se,{children:c.jsx($e,{placeholder:"Введіть ваше ім'я",...p})}),c.jsx(ce,{})]})}),c.jsx(oe,{control:s.control,name:"lastName",render:({field:p})=>c.jsxs(ae,{children:[c.jsx(Q,{children:"Прізвище"}),c.jsx(se,{children:c.jsx($e,{placeholder:"Введіть ваше прізвище",...p})}),c.jsx(ce,{})]})}),c.jsx(oe,{control:s.control,name:"middleName",render:({field:p})=>c.jsxs(ae,{children:[c.jsx(Q,{children:"По батькові"}),c.jsx(se,{children:c.jsx($e,{placeholder:"Введіть ваше по батькові",...p})}),c.jsx(ce,{})]})}),c.jsx(oe,{control:s.control,name:"phone",render:({field:p})=>c.jsxs(ae,{children:[c.jsx(Q,{children:"Телефон"}),c.jsx(se,{children:c.jsx($e,{placeholder:"+380XXXXXXXXX",...p})}),c.jsx(ce,{})]})}),c.jsx(oe,{control:s.control,name:"email",render:({field:p})=>c.jsxs(ae,{children:[c.jsx(Q,{children:"Email"}),c.jsx(se,{children:c.jsx($e,{placeholder:"your@email.com",...p})}),c.jsx(ce,{})]})})]}),c.jsxs("div",{className:"space-y-4",children:[c.jsx(Q,{children:"Доставка"}),c.jsx(Ua,{onSelect:S})]}),c.jsxs("div",{className:"space-y-4",children:[c.jsx(oe,{control:s.control,name:"payerType",render:({field:p})=>c.jsxs(ae,{children:[c.jsx(Q,{children:"Хто оплачує доставку"}),c.jsxs(Qe,{onValueChange:p.onChange,defaultValue:p.value,children:[c.jsx(se,{children:c.jsx(Je,{children:c.jsx(et,{placeholder:"Виберіть хто оплачує"})})}),c.jsxs(tt,{children:[c.jsx(Ne,{value:"Sender",children:"Відправник"}),c.jsx(Ne,{value:"Recipient",children:"Отримувач"})]})]}),c.jsx(ce,{})]})}),c.jsx(oe,{control:s.control,name:"paymentMethod",render:({field:p})=>c.jsxs(ae,{children:[c.jsx(Q,{children:"Спосіб оплати"}),c.jsxs(Qe,{onValueChange:p.onChange,defaultValue:p.value,children:[c.jsx(se,{children:c.jsx(Je,{children:c.jsx(et,{placeholder:"Виберіть спосіб оплати"})})}),c.jsxs(tt,{children:[c.jsx(Ne,{value:"Cash",children:"Готівка"}),c.jsx(Ne,{value:"NonCash",children:"Безготівка"})]})]}),c.jsx(ce,{})]})})]}),c.jsx(Re,{type:"submit",className:"w-full h-12 text-lg font-bold bg-kitty-pink hover:bg-pink-400 transition",disabled:n,children:n?c.jsxs(c.Fragment,{children:[c.jsx(fr,{className:"mr-2 h-5 w-5 animate-spin"}),"Обробка..."]}):"Оформити замовлення"})]})})]})})]})})}const as=()=>{const e=dr(),[n,t]=r.useState(!1),[o,a]=r.useState(null),[s,l]=r.useState(null),[i,d]=r.useState({}),{toast:u}=Kt(),{items:f,total:h}=Se();r.useEffect(()=>{(async()=>{const{data:{session:v}}=await ye.auth.getSession(),x=v==null?void 0:v.user;x!=null&&x.email?(l(x),await C(x.id)):(await ye.auth.signOut(),localStorage.removeItem("cart"))})()},[]);const C=async S=>{try{const{data:v,error:x}=await ye.from("customers").select("*").eq("id",S).single();if(v){d({name:v.name||"",email:v.email||"",phone:v.phone||""});const{data:p,error:E}=await ye.from("orders").select("*").eq("user_id",S).order("created_at",{ascending:!1}).limit(1).single();p&&!E&&d(N=>({...N,address:p.shipping_address||"",city:p.shipping_city||""}))}else x&&s&&d({email:s.email||""})}catch(v){console.error("Error fetching user data:",v)}},g=async S=>{a(null),t(!0);try{if(f.length===0){u({title:"Помилка",description:"Ваш кошик порожній",variant:"destructive"}),t(!1);return}localStorage.removeItem("cart"),Tr.remove("checkout-form"),window.dispatchEvent(new Event("cartUpdated")),e("/payment-success")}catch(v){console.error("Помилка оплати:",v),a("Сталася помилка при обробці замовлення"),u({title:"Помилка",description:"Сталася помилка при обробці замовлення",variant:"destructive"})}finally{t(!1)}};return c.jsxs("div",{className:"min-h-screen flex flex-col",children:[c.jsx(pr,{}),c.jsx("main",{className:"flex-grow container mx-auto px-4 py-8",children:c.jsxs("div",{className:"max-w-[70rem] mx-auto",children:[o&&c.jsx(Xt,{variant:"destructive",className:"mb-6",children:c.jsx(Gt,{children:o})}),c.jsx(Ka,{onSubmit:g,isProcessing:n,defaultValues:i,cartItems:f,total:h})]})}),c.jsx(mr,{})]})};export{as as default};
