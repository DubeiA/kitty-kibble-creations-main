import{c as Pe,j as t,O as Kt,A as Te,I as Ae,r as a,J as $t,D as ne,B as Y,C as g,F as Ut,K as Bt,P as B,T as Oe,M as Ht,U as ke,E as Vt,W as Xt,H as zt,R as Yt,N as Wt,a as M,m as qt,v as Zt,o as P}from"./index-VvENCeXe.js";import{B as U,H as Jt,N as Qt}from"./NewsletterAndFooter-CEqVmu0V.js";import{c as Le,R as en,I as tn,C as nn,a as rn,b as on,d as an,e as sn}from"./index-BRcfsWsy.js";import{a as cn,u as be}from"./index-ePJpB9Uz.js";import{h as dn,g as un,F as ln,d as pn,C as mn}from"./Combination-BDTKkzfK.js";import{g as fn,a as xn}from"./checkoutUtils-B8bml97r.js";import{B as hn,C as je,P as Ne,a as ye,T as Re,b as Se}from"./badge-BTjXTMOF.js";import{L as De}from"./loader-circle-CCt253HO.js";import{C as Ee}from"./circle-check-big-BJ9Le-r5.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gn=Pe("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vn=Pe("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);function wn({onRefresh:e,onLogout:r}){return t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx("h2",{className:"text-xl font-medium",children:"Список замовлень"}),t.jsxs("div",{className:"space-x-2",children:[t.jsx(U,{onClick:e,variant:"outline",children:"Оновити"}),t.jsx(U,{onClick:r,variant:"outline",children:"Вийти"})]})]})}var de=["Enter"," "],Mn=["ArrowDown","PageUp","Home"],Fe=["ArrowUp","PageDown","End"],Cn=[...Mn,...Fe],_n={ltr:[...de,"ArrowRight"],rtl:[...de,"ArrowLeft"]},bn={ltr:["ArrowLeft"],rtl:["ArrowRight"]},W="Menu",[X,jn,Nn]=Kt(W),[A,Ge]=Te(W,[Nn,Ae,Le]),re=Ae(),Ke=Le(),[yn,O]=A(W),[Rn,q]=A(W),$e=e=>{const{__scopeMenu:r,open:n=!1,children:o,dir:s,onOpenChange:c,modal:l=!0}=e,p=re(r),[m,d]=a.useState(null),u=a.useRef(!1),i=Oe(c),h=cn(s);return a.useEffect(()=>{const v=()=>{u.current=!0,document.addEventListener("pointerdown",x,{capture:!0,once:!0}),document.addEventListener("pointermove",x,{capture:!0,once:!0})},x=()=>u.current=!1;return document.addEventListener("keydown",v,{capture:!0}),()=>{document.removeEventListener("keydown",v,{capture:!0}),document.removeEventListener("pointerdown",x,{capture:!0}),document.removeEventListener("pointermove",x,{capture:!0})}},[]),t.jsx(Yt,{...p,children:t.jsx(yn,{scope:r,open:n,onOpenChange:i,content:m,onContentChange:d,children:t.jsx(Rn,{scope:r,onClose:a.useCallback(()=>i(!1),[i]),isUsingKeyboardRef:u,dir:h,modal:l,children:o})})})};$e.displayName=W;var Sn="MenuAnchor",le=a.forwardRef((e,r)=>{const{__scopeMenu:n,...o}=e,s=re(n);return t.jsx($t,{...s,...o,ref:r})});le.displayName=Sn;var pe="MenuPortal",[Dn,Ue]=A(pe,{forceMount:void 0}),Be=e=>{const{__scopeMenu:r,forceMount:n,children:o,container:s}=e,c=O(pe,r);return t.jsx(Dn,{scope:r,forceMount:n,children:t.jsx(ne,{present:n||c.open,children:t.jsx(zt,{asChild:!0,container:s,children:o})})})};Be.displayName=pe;var j="MenuContent",[En,me]=A(j),He=a.forwardRef((e,r)=>{const n=Ue(j,e.__scopeMenu),{forceMount:o=n.forceMount,...s}=e,c=O(j,e.__scopeMenu),l=q(j,e.__scopeMenu);return t.jsx(X.Provider,{scope:e.__scopeMenu,children:t.jsx(ne,{present:o||c.open,children:t.jsx(X.Slot,{scope:e.__scopeMenu,children:l.modal?t.jsx(In,{...s,ref:r}):t.jsx(Pn,{...s,ref:r})})})})}),In=a.forwardRef((e,r)=>{const n=O(j,e.__scopeMenu),o=a.useRef(null),s=Y(r,o);return a.useEffect(()=>{const c=o.current;if(c)return dn(c)},[]),t.jsx(fe,{...e,ref:s,trapFocus:n.open,disableOutsidePointerEvents:n.open,disableOutsideScroll:!0,onFocusOutside:g(e.onFocusOutside,c=>c.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>n.onOpenChange(!1)})}),Pn=a.forwardRef((e,r)=>{const n=O(j,e.__scopeMenu);return t.jsx(fe,{...e,ref:r,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>n.onOpenChange(!1)})}),fe=a.forwardRef((e,r)=>{const{__scopeMenu:n,loop:o=!1,trapFocus:s,onOpenAutoFocus:c,onCloseAutoFocus:l,disableOutsidePointerEvents:p,onEntryFocus:m,onEscapeKeyDown:d,onPointerDownOutside:u,onFocusOutside:i,onInteractOutside:h,onDismiss:v,disableOutsideScroll:x,...w}=e,_=O(j,n),N=q(j,n),y=re(n),k=Ke(n),L=jn(n),[Z,E]=a.useState(null),I=a.useRef(null),Ot=Y(r,I,_.onContentChange),J=a.useRef(0),Q=a.useRef(""),kt=a.useRef(0),ae=a.useRef(null),we=a.useRef("right"),se=a.useRef(0),Lt=x?pn:a.Fragment,Ft=x?{as:Vt,allowPinchZoom:!0}:void 0,Gt=f=>{var G,Ce;const b=Q.current+f,R=L().filter(S=>!S.disabled),D=document.activeElement,ce=(G=R.find(S=>S.ref.current===D))==null?void 0:G.textValue,ie=R.map(S=>S.textValue),Me=Hn(ie,b,ce),H=(Ce=R.find(S=>S.textValue===Me))==null?void 0:Ce.ref.current;(function S(_e){Q.current=_e,window.clearTimeout(J.current),_e!==""&&(J.current=window.setTimeout(()=>S(""),1e3))})(b),H&&setTimeout(()=>H.focus())};a.useEffect(()=>()=>window.clearTimeout(J.current),[]),un();const F=a.useCallback(f=>{var R,D;return we.current===((R=ae.current)==null?void 0:R.side)&&Xn(f,(D=ae.current)==null?void 0:D.area)},[]);return t.jsx(En,{scope:n,searchRef:Q,onItemEnter:a.useCallback(f=>{F(f)&&f.preventDefault()},[F]),onItemLeave:a.useCallback(f=>{var b;F(f)||((b=I.current)==null||b.focus(),E(null))},[F]),onTriggerLeave:a.useCallback(f=>{F(f)&&f.preventDefault()},[F]),pointerGraceTimerRef:kt,onPointerGraceIntentChange:a.useCallback(f=>{ae.current=f},[]),children:t.jsx(Lt,{...Ft,children:t.jsx(ln,{asChild:!0,trapped:s,onMountAutoFocus:g(c,f=>{var b;f.preventDefault(),(b=I.current)==null||b.focus({preventScroll:!0})}),onUnmountAutoFocus:l,children:t.jsx(Ut,{asChild:!0,disableOutsidePointerEvents:p,onEscapeKeyDown:d,onPointerDownOutside:u,onFocusOutside:i,onInteractOutside:h,onDismiss:v,children:t.jsx(en,{asChild:!0,...k,dir:N.dir,orientation:"vertical",loop:o,currentTabStopId:Z,onCurrentTabStopIdChange:E,onEntryFocus:g(m,f=>{N.isUsingKeyboardRef.current||f.preventDefault()}),preventScrollOnEntryFocus:!0,children:t.jsx(Bt,{role:"menu","aria-orientation":"vertical","data-state":st(_.open),"data-radix-menu-content":"",dir:N.dir,...y,...w,ref:Ot,style:{outline:"none",...w.style},onKeyDown:g(w.onKeyDown,f=>{const R=f.target.closest("[data-radix-menu-content]")===f.currentTarget,D=f.ctrlKey||f.altKey||f.metaKey,ce=f.key.length===1;R&&(f.key==="Tab"&&f.preventDefault(),!D&&ce&&Gt(f.key));const ie=I.current;if(f.target!==ie||!Cn.includes(f.key))return;f.preventDefault();const H=L().filter(G=>!G.disabled).map(G=>G.ref.current);Fe.includes(f.key)&&H.reverse(),Un(H)}),onBlur:g(e.onBlur,f=>{f.currentTarget.contains(f.target)||(window.clearTimeout(J.current),Q.current="")}),onPointerMove:g(e.onPointerMove,z(f=>{const b=f.target,R=se.current!==f.clientX;if(f.currentTarget.contains(b)&&R){const D=f.clientX>se.current?"right":"left";we.current=D,se.current=f.clientX}}))})})})})})})});He.displayName=j;var Tn="MenuGroup",xe=a.forwardRef((e,r)=>{const{__scopeMenu:n,...o}=e;return t.jsx(B.div,{role:"group",...o,ref:r})});xe.displayName=Tn;var An="MenuLabel",Ve=a.forwardRef((e,r)=>{const{__scopeMenu:n,...o}=e;return t.jsx(B.div,{...o,ref:r})});Ve.displayName=An;var ee="MenuItem",Ie="menu.itemSelect",oe=a.forwardRef((e,r)=>{const{disabled:n=!1,onSelect:o,...s}=e,c=a.useRef(null),l=q(ee,e.__scopeMenu),p=me(ee,e.__scopeMenu),m=Y(r,c),d=a.useRef(!1),u=()=>{const i=c.current;if(!n&&i){const h=new CustomEvent(Ie,{bubbles:!0,cancelable:!0});i.addEventListener(Ie,v=>o==null?void 0:o(v),{once:!0}),Xt(i,h),h.defaultPrevented?d.current=!1:l.onClose()}};return t.jsx(Xe,{...s,ref:m,disabled:n,onClick:g(e.onClick,u),onPointerDown:i=>{var h;(h=e.onPointerDown)==null||h.call(e,i),d.current=!0},onPointerUp:g(e.onPointerUp,i=>{var h;d.current||(h=i.currentTarget)==null||h.click()}),onKeyDown:g(e.onKeyDown,i=>{const h=p.searchRef.current!=="";n||h&&i.key===" "||de.includes(i.key)&&(i.currentTarget.click(),i.preventDefault())})})});oe.displayName=ee;var Xe=a.forwardRef((e,r)=>{const{__scopeMenu:n,disabled:o=!1,textValue:s,...c}=e,l=me(ee,n),p=Ke(n),m=a.useRef(null),d=Y(r,m),[u,i]=a.useState(!1),[h,v]=a.useState("");return a.useEffect(()=>{const x=m.current;x&&v((x.textContent??"").trim())},[c.children]),t.jsx(X.ItemSlot,{scope:n,disabled:o,textValue:s??h,children:t.jsx(tn,{asChild:!0,...p,focusable:!o,children:t.jsx(B.div,{role:"menuitem","data-highlighted":u?"":void 0,"aria-disabled":o||void 0,"data-disabled":o?"":void 0,...c,ref:d,onPointerMove:g(e.onPointerMove,z(x=>{o?l.onItemLeave(x):(l.onItemEnter(x),x.defaultPrevented||x.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:g(e.onPointerLeave,z(x=>l.onItemLeave(x))),onFocus:g(e.onFocus,()=>i(!0)),onBlur:g(e.onBlur,()=>i(!1))})})})}),On="MenuCheckboxItem",ze=a.forwardRef((e,r)=>{const{checked:n=!1,onCheckedChange:o,...s}=e;return t.jsx(Je,{scope:e.__scopeMenu,checked:n,children:t.jsx(oe,{role:"menuitemcheckbox","aria-checked":te(n)?"mixed":n,...s,ref:r,"data-state":ge(n),onSelect:g(s.onSelect,()=>o==null?void 0:o(te(n)?!0:!n),{checkForDefaultPrevented:!1})})})});ze.displayName=On;var Ye="MenuRadioGroup",[kn,Ln]=A(Ye,{value:void 0,onValueChange:()=>{}}),We=a.forwardRef((e,r)=>{const{value:n,onValueChange:o,...s}=e,c=Oe(o);return t.jsx(kn,{scope:e.__scopeMenu,value:n,onValueChange:c,children:t.jsx(xe,{...s,ref:r})})});We.displayName=Ye;var qe="MenuRadioItem",Ze=a.forwardRef((e,r)=>{const{value:n,...o}=e,s=Ln(qe,e.__scopeMenu),c=n===s.value;return t.jsx(Je,{scope:e.__scopeMenu,checked:c,children:t.jsx(oe,{role:"menuitemradio","aria-checked":c,...o,ref:r,"data-state":ge(c),onSelect:g(o.onSelect,()=>{var l;return(l=s.onValueChange)==null?void 0:l.call(s,n)},{checkForDefaultPrevented:!1})})})});Ze.displayName=qe;var he="MenuItemIndicator",[Je,Fn]=A(he,{checked:!1}),Qe=a.forwardRef((e,r)=>{const{__scopeMenu:n,forceMount:o,...s}=e,c=Fn(he,n);return t.jsx(ne,{present:o||te(c.checked)||c.checked===!0,children:t.jsx(B.span,{...s,ref:r,"data-state":ge(c.checked)})})});Qe.displayName=he;var Gn="MenuSeparator",et=a.forwardRef((e,r)=>{const{__scopeMenu:n,...o}=e;return t.jsx(B.div,{role:"separator","aria-orientation":"horizontal",...o,ref:r})});et.displayName=Gn;var Kn="MenuArrow",tt=a.forwardRef((e,r)=>{const{__scopeMenu:n,...o}=e,s=re(n);return t.jsx(Ht,{...s,...o,ref:r})});tt.displayName=Kn;var $n="MenuSub",[Wr,nt]=A($n),V="MenuSubTrigger",rt=a.forwardRef((e,r)=>{const n=O(V,e.__scopeMenu),o=q(V,e.__scopeMenu),s=nt(V,e.__scopeMenu),c=me(V,e.__scopeMenu),l=a.useRef(null),{pointerGraceTimerRef:p,onPointerGraceIntentChange:m}=c,d={__scopeMenu:e.__scopeMenu},u=a.useCallback(()=>{l.current&&window.clearTimeout(l.current),l.current=null},[]);return a.useEffect(()=>u,[u]),a.useEffect(()=>{const i=p.current;return()=>{window.clearTimeout(i),m(null)}},[p,m]),t.jsx(le,{asChild:!0,...d,children:t.jsx(Xe,{id:s.triggerId,"aria-haspopup":"menu","aria-expanded":n.open,"aria-controls":s.contentId,"data-state":st(n.open),...e,ref:ke(r,s.onTriggerChange),onClick:i=>{var h;(h=e.onClick)==null||h.call(e,i),!(e.disabled||i.defaultPrevented)&&(i.currentTarget.focus(),n.open||n.onOpenChange(!0))},onPointerMove:g(e.onPointerMove,z(i=>{c.onItemEnter(i),!i.defaultPrevented&&!e.disabled&&!n.open&&!l.current&&(c.onPointerGraceIntentChange(null),l.current=window.setTimeout(()=>{n.onOpenChange(!0),u()},100))})),onPointerLeave:g(e.onPointerLeave,z(i=>{var v,x;u();const h=(v=n.content)==null?void 0:v.getBoundingClientRect();if(h){const w=(x=n.content)==null?void 0:x.dataset.side,_=w==="right",N=_?-5:5,y=h[_?"left":"right"],k=h[_?"right":"left"];c.onPointerGraceIntentChange({area:[{x:i.clientX+N,y:i.clientY},{x:y,y:h.top},{x:k,y:h.top},{x:k,y:h.bottom},{x:y,y:h.bottom}],side:w}),window.clearTimeout(p.current),p.current=window.setTimeout(()=>c.onPointerGraceIntentChange(null),300)}else{if(c.onTriggerLeave(i),i.defaultPrevented)return;c.onPointerGraceIntentChange(null)}})),onKeyDown:g(e.onKeyDown,i=>{var v;const h=c.searchRef.current!=="";e.disabled||h&&i.key===" "||_n[o.dir].includes(i.key)&&(n.onOpenChange(!0),(v=n.content)==null||v.focus(),i.preventDefault())})})})});rt.displayName=V;var ot="MenuSubContent",at=a.forwardRef((e,r)=>{const n=Ue(j,e.__scopeMenu),{forceMount:o=n.forceMount,...s}=e,c=O(j,e.__scopeMenu),l=q(j,e.__scopeMenu),p=nt(ot,e.__scopeMenu),m=a.useRef(null),d=Y(r,m);return t.jsx(X.Provider,{scope:e.__scopeMenu,children:t.jsx(ne,{present:o||c.open,children:t.jsx(X.Slot,{scope:e.__scopeMenu,children:t.jsx(fe,{id:p.contentId,"aria-labelledby":p.triggerId,...s,ref:d,align:"start",side:l.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:u=>{var i;l.isUsingKeyboardRef.current&&((i=m.current)==null||i.focus()),u.preventDefault()},onCloseAutoFocus:u=>u.preventDefault(),onFocusOutside:g(e.onFocusOutside,u=>{u.target!==p.trigger&&c.onOpenChange(!1)}),onEscapeKeyDown:g(e.onEscapeKeyDown,u=>{l.onClose(),u.preventDefault()}),onKeyDown:g(e.onKeyDown,u=>{var v;const i=u.currentTarget.contains(u.target),h=bn[l.dir].includes(u.key);i&&h&&(c.onOpenChange(!1),(v=p.trigger)==null||v.focus(),u.preventDefault())})})})})})});at.displayName=ot;function st(e){return e?"open":"closed"}function te(e){return e==="indeterminate"}function ge(e){return te(e)?"indeterminate":e?"checked":"unchecked"}function Un(e){const r=document.activeElement;for(const n of e)if(n===r||(n.focus(),document.activeElement!==r))return}function Bn(e,r){return e.map((n,o)=>e[(r+o)%e.length])}function Hn(e,r,n){const s=r.length>1&&Array.from(r).every(d=>d===r[0])?r[0]:r,c=n?e.indexOf(n):-1;let l=Bn(e,Math.max(c,0));s.length===1&&(l=l.filter(d=>d!==n));const m=l.find(d=>d.toLowerCase().startsWith(s.toLowerCase()));return m!==n?m:void 0}function Vn(e,r){const{x:n,y:o}=e;let s=!1;for(let c=0,l=r.length-1;c<r.length;l=c++){const p=r[c].x,m=r[c].y,d=r[l].x,u=r[l].y;m>o!=u>o&&n<(d-p)*(o-m)/(u-m)+p&&(s=!s)}return s}function Xn(e,r){if(!r)return!1;const n={x:e.clientX,y:e.clientY};return Vn(n,r)}function z(e){return r=>r.pointerType==="mouse"?e(r):void 0}var zn=$e,Yn=le,Wn=Be,qn=He,Zn=xe,Jn=Ve,Qn=oe,er=ze,tr=We,nr=Ze,rr=Qe,or=et,ar=tt,sr=rt,cr=at,ve="DropdownMenu",[ir,qr]=Te(ve,[Ge]),C=Ge(),[dr,ct]=ir(ve),it=e=>{const{__scopeDropdownMenu:r,children:n,dir:o,open:s,defaultOpen:c,onOpenChange:l,modal:p=!0}=e,m=C(r),d=a.useRef(null),[u=!1,i]=Wt({prop:s,defaultProp:c,onChange:l});return t.jsx(dr,{scope:r,triggerId:be(),triggerRef:d,contentId:be(),open:u,onOpenChange:i,onOpenToggle:a.useCallback(()=>i(h=>!h),[i]),modal:p,children:t.jsx(zn,{...m,open:u,onOpenChange:i,dir:o,modal:p,children:n})})};it.displayName=ve;var dt="DropdownMenuTrigger",ut=a.forwardRef((e,r)=>{const{__scopeDropdownMenu:n,disabled:o=!1,...s}=e,c=ct(dt,n),l=C(n);return t.jsx(Yn,{asChild:!0,...l,children:t.jsx(B.button,{type:"button",id:c.triggerId,"aria-haspopup":"menu","aria-expanded":c.open,"aria-controls":c.open?c.contentId:void 0,"data-state":c.open?"open":"closed","data-disabled":o?"":void 0,disabled:o,...s,ref:ke(r,c.triggerRef),onPointerDown:g(e.onPointerDown,p=>{!o&&p.button===0&&p.ctrlKey===!1&&(c.onOpenToggle(),c.open||p.preventDefault())}),onKeyDown:g(e.onKeyDown,p=>{o||(["Enter"," "].includes(p.key)&&c.onOpenToggle(),p.key==="ArrowDown"&&c.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(p.key)&&p.preventDefault())})})})});ut.displayName=dt;var ur="DropdownMenuPortal",lt=e=>{const{__scopeDropdownMenu:r,...n}=e,o=C(r);return t.jsx(Wn,{...o,...n})};lt.displayName=ur;var pt="DropdownMenuContent",mt=a.forwardRef((e,r)=>{const{__scopeDropdownMenu:n,...o}=e,s=ct(pt,n),c=C(n),l=a.useRef(!1);return t.jsx(qn,{id:s.contentId,"aria-labelledby":s.triggerId,...c,...o,ref:r,onCloseAutoFocus:g(e.onCloseAutoFocus,p=>{var m;l.current||(m=s.triggerRef.current)==null||m.focus(),l.current=!1,p.preventDefault()}),onInteractOutside:g(e.onInteractOutside,p=>{const m=p.detail.originalEvent,d=m.button===0&&m.ctrlKey===!0,u=m.button===2||d;(!s.modal||u)&&(l.current=!0)}),style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});mt.displayName=pt;var lr="DropdownMenuGroup",pr=a.forwardRef((e,r)=>{const{__scopeDropdownMenu:n,...o}=e,s=C(n);return t.jsx(Zn,{...s,...o,ref:r})});pr.displayName=lr;var mr="DropdownMenuLabel",ft=a.forwardRef((e,r)=>{const{__scopeDropdownMenu:n,...o}=e,s=C(n);return t.jsx(Jn,{...s,...o,ref:r})});ft.displayName=mr;var fr="DropdownMenuItem",xt=a.forwardRef((e,r)=>{const{__scopeDropdownMenu:n,...o}=e,s=C(n);return t.jsx(Qn,{...s,...o,ref:r})});xt.displayName=fr;var xr="DropdownMenuCheckboxItem",ht=a.forwardRef((e,r)=>{const{__scopeDropdownMenu:n,...o}=e,s=C(n);return t.jsx(er,{...s,...o,ref:r})});ht.displayName=xr;var hr="DropdownMenuRadioGroup",gr=a.forwardRef((e,r)=>{const{__scopeDropdownMenu:n,...o}=e,s=C(n);return t.jsx(tr,{...s,...o,ref:r})});gr.displayName=hr;var vr="DropdownMenuRadioItem",gt=a.forwardRef((e,r)=>{const{__scopeDropdownMenu:n,...o}=e,s=C(n);return t.jsx(nr,{...s,...o,ref:r})});gt.displayName=vr;var wr="DropdownMenuItemIndicator",vt=a.forwardRef((e,r)=>{const{__scopeDropdownMenu:n,...o}=e,s=C(n);return t.jsx(rr,{...s,...o,ref:r})});vt.displayName=wr;var Mr="DropdownMenuSeparator",wt=a.forwardRef((e,r)=>{const{__scopeDropdownMenu:n,...o}=e,s=C(n);return t.jsx(or,{...s,...o,ref:r})});wt.displayName=Mr;var Cr="DropdownMenuArrow",_r=a.forwardRef((e,r)=>{const{__scopeDropdownMenu:n,...o}=e,s=C(n);return t.jsx(ar,{...s,...o,ref:r})});_r.displayName=Cr;var br="DropdownMenuSubTrigger",Mt=a.forwardRef((e,r)=>{const{__scopeDropdownMenu:n,...o}=e,s=C(n);return t.jsx(sr,{...s,...o,ref:r})});Mt.displayName=br;var jr="DropdownMenuSubContent",Ct=a.forwardRef((e,r)=>{const{__scopeDropdownMenu:n,...o}=e,s=C(n);return t.jsx(cr,{...s,...o,ref:r,style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});Ct.displayName=jr;var Nr=it,yr=ut,Rr=lt,_t=mt,bt=ft,jt=xt,Nt=ht,yt=gt,Rt=vt,St=wt,Dt=Mt,Et=Ct;const Sr=Nr,Dr=yr,Er=a.forwardRef(({className:e,inset:r,children:n,...o},s)=>t.jsxs(Dt,{ref:s,className:M("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",r&&"pl-8",e),...o,children:[n,t.jsx(gn,{className:"ml-auto h-4 w-4"})]}));Er.displayName=Dt.displayName;const Ir=a.forwardRef(({className:e,...r},n)=>t.jsx(Et,{ref:n,className:M("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...r}));Ir.displayName=Et.displayName;const It=a.forwardRef(({className:e,sideOffset:r=4,...n},o)=>t.jsx(Rr,{children:t.jsx(_t,{ref:o,sideOffset:r,className:M("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...n})}));It.displayName=_t.displayName;const T=a.forwardRef(({className:e,inset:r,...n},o)=>t.jsx(jt,{ref:o,className:M("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",r&&"pl-8",e),...n}));T.displayName=jt.displayName;const Pr=a.forwardRef(({className:e,children:r,checked:n,...o},s)=>t.jsxs(Nt,{ref:s,className:M("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),checked:n,...o,children:[t.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:t.jsx(Rt,{children:t.jsx(mn,{className:"h-4 w-4"})})}),r]}));Pr.displayName=Nt.displayName;const Tr=a.forwardRef(({className:e,children:r,...n},o)=>t.jsxs(yt,{ref:o,className:M("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...n,children:[t.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:t.jsx(Rt,{children:t.jsx(vn,{className:"h-2 w-2 fill-current"})})}),r]}));Tr.displayName=yt.displayName;const Ar=a.forwardRef(({className:e,inset:r,...n},o)=>t.jsx(bt,{ref:o,className:M("px-2 py-1.5 text-sm font-semibold",r&&"pl-8",e),...n}));Ar.displayName=bt.displayName;const Or=a.forwardRef(({className:e,...r},n)=>t.jsx(St,{ref:n,className:M("-mx-1 my-1 h-px bg-muted",e),...r}));Or.displayName=St.displayName;const Pt=a.forwardRef(({className:e,...r},n)=>t.jsx("div",{className:"relative w-full overflow-auto",children:t.jsx("table",{ref:n,className:M("w-full caption-bottom text-sm",e),...r})}));Pt.displayName="Table";const Tt=a.forwardRef(({className:e,...r},n)=>t.jsx("thead",{ref:n,className:M("[&_tr]:border-b",e),...r}));Tt.displayName="TableHeader";const At=a.forwardRef(({className:e,...r},n)=>t.jsx("tbody",{ref:n,className:M("[&_tr:last-child]:border-0",e),...r}));At.displayName="TableBody";const kr=a.forwardRef(({className:e,...r},n)=>t.jsx("tfoot",{ref:n,className:M("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",e),...r}));kr.displayName="TableFooter";const ue=a.forwardRef(({className:e,...r},n)=>t.jsx("tr",{ref:n,className:M("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",e),...r}));ue.displayName="TableRow";const K=a.forwardRef(({className:e,...r},n)=>t.jsx("th",{ref:n,className:M("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",e),...r}));K.displayName="TableHead";const $=a.forwardRef(({className:e,...r},n)=>t.jsx("td",{ref:n,className:M("p-4 align-middle [&:has([role=checkbox])]:pr-0",e),...r}));$.displayName="TableCell";const Lr=a.forwardRef(({className:e,...r},n)=>t.jsx("caption",{ref:n,className:M("mt-4 text-sm text-muted-foreground",e),...r}));Lr.displayName="TableCaption";const Fr=e=>e>=1e3?`${e/1e3} кг`:`${e} г`;function Gr({orders:e,loading:r,onUpdateStatus:n,handleDeleteOrder:o}){const[s,c]=a.useState({});if(r)return t.jsxs("div",{className:"py-8 text-center",children:[t.jsx(De,{className:"w-8 h-8 animate-spin mx-auto mb-2"}),t.jsx("p",{children:"Завантаження замовлень..."})]});if(e.length===0)return t.jsx("div",{className:"py-8 text-center",children:"Немає замовлень"});const l=d=>new Date(d).toLocaleString("uk-UA",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}),p=d=>{const{icon:u,className:i}=xn(d);switch(u){case"CheckCircle":return t.jsx(Ee,{className:i});case"Truck":return t.jsx(Re,{className:i});case"Package":return t.jsx(Ne,{className:i});case"PackageCheck":return t.jsx(ye,{className:i});case"XCircle":return t.jsx(Se,{className:i});default:return t.jsx(je,{className:i})}},m=async(d,u)=>{c(i=>({...i,[d]:!0})),await n(d,u),c(i=>({...i,[d]:!1}))};return t.jsx("div",{className:"space-y-8",children:e.map(d=>t.jsxs("div",{className:"border rounded-lg p-6",children:[t.jsxs("div",{className:"flex justify-between items-start mb-4",children:[t.jsxs("div",{children:[t.jsxs("h3",{className:"text-lg font-medium",children:["Замовлення #",d.id.substring(0,8),"..."]}),t.jsx("p",{className:"text-sm text-muted-foreground",children:l(d.created_at)}),d.customer_name&&t.jsxs("p",{className:"text-sm",children:["Клієнт: ",d.customer_name," (",d.customer_email,")"]})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[p(d.status),t.jsx(hn,{variant:d.status==="delivered"?"default":d.status==="cancelled"?"destructive":"secondary",children:t.jsx("span",{className:"capitalize font-medium",children:fn(d.status).label})})]})]}),t.jsxs("div",{className:"border-t border-b py-4 my-4",children:[t.jsx("p",{className:"font-medium",children:"Товари:"}),t.jsx("div",{className:"overflow-x-auto",children:t.jsxs(Pt,{children:[t.jsx(Tt,{children:t.jsxs(ue,{children:[t.jsx(K,{children:"Назва"}),t.jsx(K,{children:"Кількість"}),t.jsx(K,{children:"Вага"}),t.jsx(K,{children:"Ціна"}),t.jsx(K,{children:"Підсумок"})]})}),t.jsx(At,{children:d.items&&d.items.map(u=>t.jsxs(ue,{children:[t.jsx($,{children:u.product_name}),t.jsx($,{children:u.quantity}),t.jsx($,{children:Fr(u.selected_weight)}),t.jsxs($,{children:[u.price_at_time.toFixed(2)," грн"]}),t.jsxs($,{children:[u.total_price.toFixed(2)," грн"]})]},u.id))})]})}),t.jsx("div",{className:"text-right mt-4",children:t.jsxs("p",{className:"font-bold",children:["Загальна сума: ",d.total_amount," грн"]})})]}),d.shipping_address&&t.jsxs("div",{className:"mb-4",children:[t.jsx("p",{className:"font-medium",children:"Адреса доставки:"}),t.jsxs("p",{children:[d.shipping_address,", ",d.shipping_city]})]}),t.jsxs("div",{className:"flex justify-end",children:[t.jsx(U,{className:"mr-auto",variant:"destructive",onClick:()=>o(d.id),children:"Видалити"}),t.jsxs(Sr,{children:[t.jsx(Dr,{asChild:!0,children:t.jsx(U,{variant:"outline",disabled:s[d.id],children:s[d.id]?t.jsxs(t.Fragment,{children:[t.jsx(De,{className:"mr-2 h-4 w-4 animate-spin"}),"Оновлення..."]}):"Змінити статус"})}),t.jsxs(It,{align:"end",children:[t.jsxs(T,{onClick:()=>m(d.id,"pending"),children:[t.jsx(je,{className:"mr-2 h-4 w-4 text-yellow-500"}),"Очікує обробки"]}),t.jsxs(T,{onClick:()=>m(d.id,"processing"),children:[t.jsx(Ne,{className:"mr-2 h-4 w-4 text-blue-500"}),"В обробці"]}),t.jsxs(T,{onClick:()=>m(d.id,"awaiting_shipment"),children:[t.jsx(ye,{className:"mr-2 h-4 w-4 text-orange-500"}),"Очікує відправлення"]}),t.jsxs(T,{onClick:()=>m(d.id,"shipped"),children:[t.jsx(Re,{className:"mr-2 h-4 w-4 text-purple-500"}),"Відправлено"]}),t.jsxs(T,{onClick:()=>m(d.id,"delivered"),children:[t.jsx(Ee,{className:"mr-2 h-4 w-4 text-green-500"}),"Доставлено"]}),t.jsxs(T,{onClick:()=>m(d.id,"cancelled"),children:[t.jsx(Se,{className:"mr-2 h-4 w-4 text-red-500"}),"Скасовано"]})]})]})]})]},d.id))})}const Zr=()=>{const[r,n]=a.useState([]),[o,s]=a.useState(!1),c=qt(),{toast:l}=Zt(),[p,m]=a.useState(0);a.useEffect(()=>{u(p);const x=P.channel("public:orders").on("postgres_changes",{event:"*",schema:"public",table:"orders"},()=>{console.log("Order changes detected, refreshing orders list"),u()}).subscribe();return()=>{P.removeChannel(x)}},[p]);const d=async x=>{window.confirm("Ви впевнені, що хочете видалити це замовлення?")&&(await P.from("order_items").delete().eq("order_id",x),await P.from("orders").delete().eq("id",x),u())},u=async(x=0)=>{try{s(!0);const w=x*5,_=w+5-1,{data:N,error:y}=await P.from("orders").select("*, items:order_items(*, products:product_id(name))").order("created_at",{ascending:!1}).range(w,_);if(y)throw y;const k=(N==null?void 0:N.map(L=>{var Z;return{...L,status:L.status,items:(Z=L.items)==null?void 0:Z.map(E=>{var I;return{...E,product_name:((I=E.products)==null?void 0:I.name)||"Невідомий товар",total_price:Number((E.quantity*E.price_at_time).toFixed(2))}})}}))||[];n(k)}catch(w){console.error("Error fetching orders:",w),l({title:"Помилка",description:"Не вдалося завантажити замовлення",variant:"destructive"})}finally{s(!1)}},i=async()=>{await P.auth.signOut(),c("/auth"),localStorage.removeItem("cart"),l({title:"Вихід виконано",description:"Ви вийшли з панелі адміністратора"})},h=async(x,w)=>{try{const{error:_}=await P.from("orders").update({status:w,updated_at:new Date().toISOString()}).eq("id",x);if(_)throw _;n(N=>N.map(y=>y.id===x?{...y,status:w,updated_at:new Date().toISOString()}:y)),l({title:"Статус оновлено",description:`Замовлення оновлено до статусу "${v(w)}"`}),u()}catch(_){console.error("Error updating order status:",_),l({title:"Помилка",description:"Не вдалося оновити статус замовлення",variant:"destructive"})}},v=x=>{switch(x){case"pending":return"Очікує обробки";case"processing":return"В обробці";case"awaiting_shipment":return"Очікує відправлення";case"shipped":return"Відправлено";case"delivered":return"Доставлено";case"cancelled":return"Скасовано";default:return"Невідомо"}};return t.jsxs("div",{className:"min-h-screen flex flex-col",children:[t.jsx(Jt,{}),t.jsx("main",{className:"flex-grow container mx-auto px-4 py-8",children:t.jsxs(nn,{className:"w-full",children:[t.jsxs(rn,{children:[t.jsx(on,{className:"text-2xl font-display",children:"Панель адміністратора"}),t.jsx(an,{children:"Керуйте замовленнями та перевіряйте їх статуси"})]}),t.jsxs(sn,{children:["(",t.jsxs("div",{className:"space-y-6",children:[t.jsx(wn,{onRefresh:u,onLogout:i}),t.jsx(Gr,{handleDeleteOrder:d,orders:r,loading:o,onUpdateStatus:h})]}),t.jsxs("div",{className:"flex items-center justify-center gap-2 mt-4",children:[t.jsx(U,{className:"ml-2",onClick:()=>m(x=>Math.max(0,x-1)),disabled:p===0,children:"Попередня"}),t.jsxs("span",{className:"text-sm",children:["Сторінка ",p+1]}),t.jsx(U,{className:"mr-2",onClick:()=>m(x=>x+1),disabled:r.length<5,children:"Наступна"})]}),")"]})]})}),t.jsx(Qt,{})]})};export{Zr as default};
